{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///router.core.min.js","webpack:///webpack/bootstrap f054c2e15f99f2f3999d?1258","webpack:///./router.core.js","webpack:///external \"riot\"?b5ff","webpack:///./src/router.js?707b","webpack:///./~/extend/index.js?36c8"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","global","apply","undefined","Router","riot","extend","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","registerTag","router","tag","opts","calculateLevel","target","level","parent","__router_level","__router_tag","bind","normalizeTag","api","options","result","unmountTag","unmount","mountTag","_normalizeTag","_normalizeTag2","_slicedToArray","console","log","canUpdate","update","replaceChild","document","createElement","children","mount","e","error","instanceTag","instanceApi","updatable","config","isMounted","updateRoute","current","response","size","matcher","get","params","query","route","on","off","detectRoute","window","configure","base","parser","path","raw","split","uri","forEach","v","push","sliceIterator","arr","i","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","length","err","Array","isArray","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","_createClass","defineProperties","props","descriptor","defineProperty","key","protoProps","staticProps","observable","interceptors","processRoute","handler","InitialRoute","Context","process","routes","interceptor","slice","arguments","filter","join","context","Request","rootContext","processRequest","processInterceptors","processResponse","isRedirect","processRedirect","request","redirectTo","trigger","addRedirect","navigateTo","args","splice","preInterceptors","postInterceptors","concat","stop","processor","shift","start","exec","Response","redirectStack","indexOf","Error","Handler","matches","routeMatch","routeMiss","add","t","ChildRequest","Route","_Handler","_this","name","pathParameterNames","getPath","replace","pattern","ignored","group","regex","RegExp","redirectRoutes","r","RedirectRoute","defaultRoutes","DefaultRoute","notFoundRoutes","NotFoundRoute","otherRoutes","_routes","hasOwnProperty","decodeURIComponent","parseInt","found","processRoutes","createRequest","_Route","substring","parentUri","_Handler2","_this3","_Handler3","_this4","from","to","_Handler4","_this5","trim","index","_","hasOwn","toStr","toString","gOPD","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","setProperty","newValue","getProperty","src","copy","copyIsArray","clone","deep"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,EAAAG,QAAA,SACA,kBAAAC,gBAAAC,IACAD,QAAA,QAAAJ,GACA,gBAAAC,SACAA,QAAA,OAAAD,EAAAG,QAAA,SAEAJ,EAAA,OAAAC,EAAAD,EAAA,OACCO,KAAA,SAAAC,GACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAT,OAGA,IAAAC,GAAAS,EAAAD,IACAT,WACAW,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAZ,EAAAD,QAAAC,IAAAD,QAAAQ,GAGAP,EAAAW,QAAA,EAGAX,EAAAD,QAvBA,GAAAU,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,SAGAR,EAAA,KDgBM,SAAUP,EAAQD,EAASQ,GAEhC,GAAIS,GAAgCC,EAA8BC,GAA8B,SAAWC,EAAQrB,GAE7GmB,GAAgCjB,EE1DlBO,EAAA,IF0DmDS,EAAiC,EAAWE,EAA2E,kBAAnCF,GAAiDA,EAA+BI,MAAMrB,EAASkB,GAAiCD,IAAmEK,SAAlCH,IAAgDlB,EAAOD,QAAUmB,KAU1Xd,KAAM,SAAUJ,EEpEhBsB,GFqED,YEpEHtB,GAAOD,QAAUuB,KF2EX,SAAUtB,EAAQD,GG5ExBC,EAAAD,QAAAM,GHiFO,CACA,CAED,SAAUL,EAAQD,EAASQ,GAEhC,GAAIS,GAAgCC,EAA8BC,GAA0D,SAASC,IAAS,SAAWA,EAAQrB,GAE3JmB,GAAgCjB,EIxFpBO,EAAA,GACEA,EAAA,IJuF2ES,EAAiC,EAAWE,EAA2E,kBAAnCF,GAAiDA,EAA+BI,MAAMrB,EAASkB,GAAiCD,IAAmEK,SAAlCH,IAAgDlB,EAAOD,QAAUmB,KAUlZd,KAAM,SAAUJ,EIlGhBuB,EACAC,GJkGD,YAwCA,SAASC,GAA2BC,EAAMd,GACxC,IAAKc,EACH,KAAM,IAAIC,gBAAe,4DAG3B,QAAOf,GAAyB,gBAATA,IAAqC,kBAATA,GAA8Bc,EAAPd,EA4B5E,QAASgB,GAAUC,EAAUC,GAC3B,GAA0B,kBAAfA,IAA4C,OAAfA,EACtC,KAAM,IAAIC,WAAU,iEAAoED,GAG1FD,GAASG,UAAYC,OAAOC,OAAOJ,GAAcA,EAAWE,WAC1DG,aACEC,MAAOP,EACPQ,YAAY,EACZC,UAAU,EACVC,cAAc,KAGdT,IAAYG,OAAOO,eAAiBP,OAAOO,eAAeX,EAAUC,GAAcD,EAASY,UAAYX,GAG7G,QAASY,GAAgBC,EAAUC,GACjC,KAAMD,YAAoBC,IACxB,KAAM,IAAIb,WAAU,qCI6K3B,QAASc,GAAYC,GACnBvB,EAAKwB,IAAI,QAAS,oCAAqC,GAAI,GAAI,SAAUC,GACvE5C,KAAK6C,eAAiB,SAAUC,GAC9B,GAAIC,GAAQ,CAIZ,OAHID,GAAOE,SAAQD,GAAS/C,KAAK6C,eAAeC,EAAOE,SACnDF,EAAOF,KAAKK,iBAAgBF,GAASD,EAAOF,KAAKK,gBACjDH,EAAOI,eAAcH,GAAS,GAC3BA,GACPI,KAAKnD,MAEPA,KAAKoD,aAAe,SAAUT,EAAKU,EAAKC,GACtC,GAAIC,GAASZ,EAAIU,EAAKC,EAOtB,OANsB,gBAAXC,GACTZ,EAAMY,GAENZ,EAAMY,EAAOZ,KAAOA,EACpBU,EAAME,EAAOF,KAAOA,IAEdV,EAAKU,EAAKC,IAGpBtD,KAAKwD,WAAa,WACZxD,KAAKuC,UACPvC,KAAKuC,SAASkB,SAAQ,IAG1BzD,KAAK0D,SAAW,SAAUf,EAAKU,EAAKC,GAClC,GAAmB,kBAARX,GAAoB,IAAAgB,GACP3D,KAAKoD,aAAaT,EAAKU,EAAKC,GADrBM,EAAAC,EAAAF,EAAA,EAC5BhB,GAD4BiB,EAAA,GACvBP,EADuBO,EAAA,GAClBN,EADkBM,EAAA,GAI/B,GADAE,QAAQC,IAAI,oBAAqBpB,EAAKU,EAAKC,GACvCtD,KAAKgE,UAAUrB,EAAKU,EAAKC,GAC3BQ,QAAQC,IAAI,oBACZ/D,KAAKuC,SAAS0B,QAASrB,KAAMS,QAG7B,IADArD,KAAKwD,aACDb,EAAK,CACP3C,KAAKP,KAAKyE,aAAaC,SAASC,cAAczB,GAAM3C,KAAKP,KAAK4E,SAAS,GACvE,KACErE,KAAKuC,SAAWpB,EAAKmD,MAAMtE,KAAKP,KAAK4E,SAAS,GAAI1B,EAAKU,GAAK,GAC5D,MAAOkB,GAEP,WADAC,GAAM,4BAA8B7B,EAAM,KAAM4B,GAGlDvE,KAAKyE,YAAc9B,EACnB3C,KAAK0E,YAAcrB,IAKzBrD,KAAKgE,UAAY,SAAUrB,EAAKU,EAAKC,GACnC,MAAIA,GAAQqB,aAAc,OACpBjC,EAAOkC,OAAOD,WAAc/B,EAAK+B,WAAcrB,EAAQqB,YAC1D3E,KAAKuC,UACLvC,KAAKuC,SAASsC,WACf7E,KAAKyE,cAAgB9B,IAKzB3C,KAAK8E,YAAc,WACjB,GAAIR,IACF3B,IAAK,KAEP,IAAID,GAAUA,EAAOqC,QAAS,CAC5B,GAAIC,GAAWtC,EAAOqC,OACtB,IAAI/E,KAAK+C,OAASiC,EAASC,OAAQ,CACjC,GAAIC,GAAUF,EAASG,IAAInF,KAAK+C,MAChC,IAAImC,EAAS,CACX,GAAIE,GAASF,EAAQE,WACjBC,EAAQL,EAASK,UACjBhC,EAAMjC,GAAO,KAAUwB,EAAMyC,EAAOH,EAAQ7B,IAAK+B,GACnDnC,eAAgBjD,KAAK+C,MACrBsC,MAAOA,GAETf,IACE3B,IAAKuC,EAAQvC,IACbU,IAAKA,EACLsB,UAAWO,EAAQI,MAAMX,aAK7BL,EAAM3B,IACR3C,KAAK0D,SAASY,EAAM3B,IAAK2B,EAAMjB,IAAKiB,GAEpCtE,KAAKwD,cACPL,KAAKnD,MAEPA,KAAKkD,aAAe,QACpBlD,KAAK+C,MAAQ/C,KAAK6C,eAAe7C,MACjC0C,EAAO6C,GAAG,gBAAiBvF,KAAK8E,aAChC9E,KAAKuF,GAAG,UAAW,WACjB7C,EAAO8C,IAAI,gBAAiBxF,KAAK8E,aACjC9E,KAAKwD,cACLL,KAAKnD,OACPA,KAAKuF,GAAG,QAASvF,KAAK8E,eAI1B,QAASW,KACP,GAAIH,GAAQnE,EAAKmE,OACdI,QAAUA,OAAOJ,OACjBvE,GAAUA,EAAOuE,KACpB,OAAOA,GAGT,QAASxD,GAAO8C,GACd,GAAIlC,GAAS,GAAIxB,EAsBjB,OArBAwB,GAAOiD,UAAUvE,GAAO,GACtBuD,WAAW,EACXW,MAAOG,IACPG,KAAM,IACNC,OAAQ,SAA0BC,GAChC,GAAIC,GAAMD,EAAKE,MAAM,KACnBC,EAAMF,EAAI,GAAGC,MAAM,KACnBX,EAAQU,EAAI,GACZX,IAQF,OAPIC,IACFA,EAAMW,MAAM,KAAKE,QAAQ,SAAUC,GACjC,GAAIzF,GAAIyF,EAAEH,MAAM,IAChBZ,GAAO1E,EAAE,IAAMA,EAAE,KAGrBuF,EAAIG,KAAKhB,GACFa,IAERrB,IACHnC,EAAYC,GACPxB,EAAOqB,WAAUrB,EAAOqB,SAAWG,GACjCA,EJxYN,GAAImB,GAAiB,WACnB,QAASwC,GAAcC,EAAKC,GAC1B,GAAIC,MACAC,GAAK,EACLC,GAAK,EACLC,EAAK1F,MAET,KACE,IAAK,GAAiC2F,GAA7BC,EAAKP,EAAIQ,OAAOC,cAAmBN,GAAMG,EAAKC,EAAGG,QAAQC,QAChET,EAAKJ,KAAKQ,EAAG5E,QAETuE,GAAKC,EAAKU,SAAWX,GAH8CE,GAAK,IAK9E,MAAOU,GACPT,GAAK,EACLC,EAAKQ,EACL,QACA,KACOV,GAAMI,EAAW,QAAGA,EAAW,SACpC,QACA,GAAIH,EAAI,KAAMC,IAIlB,MAAOH,GAGT,MAAO,UAAUF,EAAKC,GACpB,GAAIa,MAAMC,QAAQf,GAChB,MAAOA,EACF,IAAIQ,OAAOC,WAAYlF,QAAOyE,GACnC,MAAOD,GAAcC,EAAKC,EAE1B,MAAM,IAAI5E,WAAU,4DAatB2F,EAAO,QAASnC,GAAIoC,EAAQC,EAAUC,GACzB,OAAXF,IAAiBA,EAASG,SAAS9F,UACvC,IAAI+F,GAAO9F,OAAO+F,yBAAyBL,EAAQC,EAEnD,IAAavG,SAAT0G,EAAoB,CACtB,GAAI3E,GAASnB,OAAOgG,eAAeN,EAEnC,OAAe,QAAXvE,EACF,OAEOmC,EAAInC,EAAQwE,EAAUC,GAE1B,GAAI,SAAWE,GACpB,MAAOA,GAAK3F,KAEZ,IAAI8F,GAASH,EAAKxC,GAElB,IAAelE,SAAX6G,EAIJ,MAAOA,GAAOtH,KAAKiH,IA0BnBM,EAAe,WACjB,QAASC,GAAiBlF,EAAQmF,GAChC,IAAK,GAAI1B,GAAI,EAAGA,EAAI0B,EAAMf,OAAQX,IAAK,CACrC,GAAI2B,GAAaD,EAAM1B,EACvB2B,GAAWjG,WAAaiG,EAAWjG,aAAc,EACjDiG,EAAW/F,cAAe,EACtB,SAAW+F,KAAYA,EAAWhG,UAAW,GACjDL,OAAOsG,eAAerF,EAAQoF,EAAWE,IAAKF,IAIlD,MAAO,UAAU1F,EAAa6F,EAAYC,GAGxC,MAFID,IAAYL,EAAiBxF,EAAYZ,UAAWyG,GACpDC,GAAaN,EAAiBxF,EAAa8F,GACxC9F,MI9MVgC,EAAQV,SAAWA,QAAQU,OAAS,aAElCtD,EJkNU,WIjNd,QAAAA,KAAcoB,EAAAtC,KAAAkB,GACZC,EAAKoH,WAAWvI,MAChBA,KAAKwI,cAAgBxI,KAAKyI,aAAatF,KAAKnD,OAC5CA,KAAK0I,QAAU,GAAIC,GACnB3I,KAAK+E,QAAU,GAAI6D,GAAQ,IAAI5D,SAC/BhF,KAAK6I,QAAU7I,KAAK6I,QAAQ1F,KAAKnD,MJ8UhC,MAvHA+H,GAAa7G,IACXkH,IAAK,QACLpG,MAAO,SItNN0G,GACJ1I,KAAK0I,QAAUA,KJyNZN,IAAK,SACLpG,MAAO,SIvNL8G,GACL9I,KAAKsF,OAAM,GAAIqD,IAAeG,OAAOA,OJ0NlCV,IAAK,MACLpG,MAAO,SIxNR+G,GACF/I,KAAKwI,aAAapC,KAAK2C,MJ2NpBX,IAAK,UACLpG,MAAO,WIxNV,GAAIoD,GAASgC,MAAMxF,UAAUoH,MAAMxI,KAAKyI,WACpC5D,KACAY,EAAMb,EAAO8D,OAAO,SAAUvI,GAChC,MAAmB,gBAAPA,KACV0E,EAAQ1E,GACD,KAGRwI,KAAK,IACO,OAAXlD,EAAI,KAAYA,EAAM,IAAMA,EAChC,IAAImD,GAAU,GAAIR,GAAQ,GAAIS,GAAQpD,EAAKZ,GAG3C,OAFKrF,MAAKsJ,cAAatJ,KAAKsJ,YAAcF,GAC1CpJ,KAAKuJ,eAAeH,GACbA,KJ4NJhB,IAAK,iBACLpG,MAAO,SI1NGoH,GAEb,MADApJ,MAAKwJ,oBAAoBJ,GAClBpJ,KAAKyJ,gBAAgBL,MJ6NzBhB,IAAK,kBACLpG,MAAO,SI3NIoH,GACd,GAAIpJ,KAAK0J,WAAWN,GAClB,MAAOpJ,MAAK2J,gBAAgBP,EAFP,IAMrBpE,IACEoE,EAFFQ,QAEER,EADFpE,SAEF,OAAKA,GAAS6E,WAAd,QACE7J,KAAK+E,QAAUC,EACfhF,KAAKsJ,YAAc,KACnBtJ,KAAK8J,QAAQ,gBAAiB9E,GACvBoE,MJ8NNhB,IAAK,aACLpG,MAAO,SI3NDoH,GACT,QAASA,EAAQpE,SAAS6E,cJ8NvBzB,IAAK,kBACLpG,MAAO,SI5NIoH,GACd,GAAInD,GAAMmD,EAAQpE,SAAS6E,UAC3B7J,MAAKsJ,YAAYS,YAAY9D,GAC7BjG,KAAKgK,WAAW/D,MJ+NbmC,IAAK,aACLpG,MAAO,WI5NV,GAAIiI,GAAO7C,MAAMxF,UAAUoH,MAAMxI,KAAKyI,UACd,kBAAbgB,GAAK,IACdA,EAAKC,OAAO,EAAG,EAAG,IAEpBlK,KAAK4E,OAAOU,MAAMtE,MAAM,KAAMiJ,MJgO3B7B,IAAK,sBACLpG,MAAO,SI9NQoH,EAASe,EAAiBC,GAC5C,GAAI5B,IAAgB2B,OAAuBE,OAAOrK,KAAKwI,cAAc6B,OAAOD,OACxEpD,EAAO,QAASA,KAClB,IAAKoC,EAAQkB,KAAM,CACjB,GAAIC,GAAY/B,EAAagC,QAE3BZ,EAEER,EAFFQ,QACA5E,EACEoE,EADFpE,QAEF,IAAIuF,EACF,MAAOA,GAAUX,EAAS5E,EAAUgC,EAAMoC,GAE9C,MAAOA,GAET,OAAOpC,QJ+NJoB,IAAK,eACLpG,MAAO,SI7NC4H,EAAS5E,EAAUgC,EAAMoC,GAEpC,MADApJ,MAAK0I,QAAQG,QAAQe,EAAS5E,EAAUoE,GACjCpC,OJgOJoB,IAAK,QACLpG,MAAO,WI7NVhC,KAAK4E,OAAOU,MAAMmF,QAClBzK,KAAK0K,UJiOFtC,IAAK,OACLpG,MAAO,WI9NVhC,KAAK4E,OAAOU,MAAMoF,KAAK1K,KAAK6I,YJkOzBT,IAAK,YACLpG,MAAO,SIhOFsB,GACRtD,KAAK4E,OAASxD,GAAO,KAAUpB,KAAK4E,OAAQtB,GACxCtD,KAAK4E,OAAOU,MAAMO,QAAU7F,KAAK4E,OAAOiB,QAC1C7F,KAAK4E,OAAOU,MAAMO,OAAO7F,KAAK4E,OAAOiB,QACnC7F,KAAK4E,OAAOU,MAAMM,MAAQ5F,KAAK4E,OAAOgB,MACxC5F,KAAK4E,OAAOU,MAAMM,KAAK5F,KAAK4E,OAAOgB,MACrC5F,KAAK4E,OAAOU,MAAMtF,KAAK6I,aJkOf3H,KI7NN0H,EJgOW,WI/Nf,QAAAA,GAAYgB,GAAStH,EAAAtC,KAAA4I,GACnB5I,KAAK4J,QAA+B,gBAAbA,GAAwB,GAAIP,GAAQO,GAAWA,EACtE5J,KAAKgF,SAAW,GAAI2F,GAAS3K,KAAK4J,SAClC5J,KAAK4K,iBJ6OJ,MARA7C,GAAaa,IACXR,IAAK,cACLpG,MAAO,SIpOAiE,GACV,GAAIjG,KAAK4K,cAAcC,QAAQ5E,IAAO,EACpC,KAAM,IAAI6E,OAAM,yBAA2B7E,EAAM,aAAejG,KAAK4K,cACvE5K,MAAK4K,cAAcxE,KAAKH,OJuOhB2C,KIlONmC,EJqOW,WIpOf,QAAAA,KAAczI,EAAAtC,KAAA+K,GJmRX,MA1CAhD,GAAagD,IACX3C,IAAK,UACLpG,MAAO,SIzOJ4H,GACN,OAAO,KJ4OJxB,IAAK,UACLpG,MAAO,SI1OJ4H,EAAS5E,GACf,GAAIE,GAAUlF,KAAKgL,QAAQpB,EAC3B,OAAK1E,GACElF,KAAKiL,WAAWrB,EAAS5E,EAAUE,GADrBlF,KAAKkL,UAAUtB,EAAS5E,MJ8O1CoD,IAAK,aACLpG,MAAO,SI3OD4H,EAAS5E,EAAUE,GAE5B,MADAF,GAASmG,IAAIjG,IACN,KJ8OJkD,IAAK,YACLpG,MAAO,SI5OF4H,EAAS5E,GACjB,OAAO,KJ+OJoD,IAAK,gBACLpG,MAAO,SI7OE4H,EAAS5E,EAAU8D,GAC/B,GAAIA,GAAUA,EAAO5B,OAAQ,CAE3B,IAAK,GADDkE,GAAItC,EAAO5B,OACNX,EAAI,EAAGA,EAAI6E,EAAG7E,IAAK,CAC1B,GAAIjB,GAAQwD,EAAOvC,EACnB,IAAIjB,EAAMuD,QAAQe,EAAS5E,GACzB,OAAO,EAEX,OAAO,MJgPNoD,IAAK,gBACLpG,MAAO,SI7OE4H,EAAS1E,GACrB,MAAO,IAAImG,GAAazB,EAAS1E,OJiPzB6F,KI7ONO,EJgPS,SAAUC,GI/OvB,QAAAD,GAAYhI,GAAShB,EAAAtC,KAAAsL,EAAA,IAAAE,GAAAnK,EAAArB,MAAAsL,EAAAjJ,WAAAR,OAAAgG,eAAAyD,IAAA9K,KAAAR,KACbsD,GACNA,GAAUA,MACVkI,EAAK7I,IAAMW,EAAQX,IACnB6I,EAAKnI,IAAMC,EAAQD,IACnBmI,EAAK1F,KAAOxC,EAAQwC,KACpB0F,EAAKC,KAAOnI,EAAQmI,KACpBD,EAAK7G,UAAYrB,EAAQqB,UACzB6G,EAAKE,qBACL,IAAI5F,GAAO0F,EAAKG,UAAUC,QAAQ,MAAO,GATtB,OAUnBJ,GAAKK,QAAU,MAAQ/F,EAAK8F,QAAQ,aAAa,SAAUE,EAASC,GAElE,MADA/L,MAAK0L,mBAAmBtF,KAAK2F,GACtB,WACP5I,KAH+CqI,IAGjC,UAChBA,EAAKQ,MAAQ,GAAIC,QAAOT,EAAKK,SAdVL,EJoUlB,MApFAhK,GAAU8J,EAAOC,GAuBjBxD,EAAauD,IACXlD,IAAK,SACLpG,MAAO,SIxPL8G,GACL,GAAIoD,GAAiBpD,EAAOI,OAAO,SAAUiD,GAC3C,MAAOA,aAAaC,KAElBC,EAAgBvD,EAAOI,OAAO,SAAUiD,GAC1C,MAAOA,aAAaG,KAElBC,EAAiBzD,EAAOI,OAAO,SAAUiD,GAC3C,MAAOA,aAAaK,KAElBC,EAAc3D,EAAOI,OAAO,SAAUiD,GACxC,MAAOD,GAAerB,QAAQsB,MAAO,GACnCE,EAAcxB,QAAQsB,MAAO,GAC7BI,EAAe1B,QAAQsB,MAAO,GAKlC,OAHII,GAAerF,OAAS,GAAG1C,EAAM,wDAA0DxE,KAAK2L,WAChGU,EAAcnF,OAAS,GAAG1C,EAAM,uDAAyDxE,KAAK2L,WAClG3L,KAAK0M,WAAarC,OAAO6B,GAAgB7B,OAAOoC,GAAapC,OAAOgC,GAAehC,OAAOkC,GACnFvM,QJyPJoI,IAAK,UACLpG,MAAO,SIvPJ4H,GACN,GAAI1E,GAAUlF,KAAKgM,MAAMtB,KAAKd,EAAQ3D,IACtC,IAAIf,EAAS,CACX,GAAIE,KACJ,KAAK,GAAImB,KAAKvG,MAAK0L,mBACjB,GAAI1L,KAAK0L,mBAAmBiB,eAAepG,GAAI,CAC7C,GAAIkF,GAAOzL,KAAK0L,mBAAmBnF,EACnCnB,GAAOqG,GAAQmB,mBAAmB1H,EAAQ2H,SAAStG,EAAG,IAAM,IAGhE,OACEjB,MAAOtF,KACP2C,IAAK3C,KAAK2C,IACVU,IAAKrD,KAAKqD,IACVyJ,MAAO5H,EAAQ,GACfE,OAAQA,GAGZ,OAAO,KJ0PJgD,IAAK,aACLpG,MAAO,SIxPD4H,EAAS5E,EAAUE,GAC5B,GAAI8F,4FAA2BpB,EAAS5E,EAAUE,EAElD,OADAlF,MAAK+M,cAAcnD,EAAS5E,EAAUE,GAC/B8F,KJ2PJ5C,IAAK,gBACLpG,MAAO,SIzPE4H,EAAS5E,EAAUE,GAC/B,MAAAoC,GAAAgE,EAAA1J,UAAAS,WAAAR,OAAAgG,eAAAyD,EAAA1J,WAAA,gBAAA5B,MAAAQ,KAAAR,KAA2BA,KAAKgN,cAAcpD,EAAS1E,GAAUF,EAAUhF,KAAK0M,YJ4P7EtE,IAAK,UACLpG,MAAO,WIzPV,MAAOhC,MAAKyL,MAAQzL,KAAK8F,OAA6B,gBAAb9F,MAAK2C,IAAmB3C,KAAK2C,IAAM,QJ8PpE2I,GIrUQP,GA2EdpC,EJ6PgB,SAAUsE,GAG3B,QAAStE,KAGP,MAFArG,GAAgBtC,KAAM2I,GAEftH,EAA2BrB,MAAO2I,EAAatG,WAAaR,OAAOgG,eAAec,IAAe3H,MAAMhB,KAAMiJ,YAGtH,MARAzH,GAAUmH,EAAcsE,GAQjBtE,GItQe2C,GAIrBD,EACJ,QAAAA,GAAYzB,EAAS1E,GAAS5C,EAAAtC,KAAAqL,GAC5BrL,KAAK4J,QAAUA,EACf5J,KAAKkF,QAAUA,EACflF,KAAKiG,IAAMjG,KAAK4J,QAAQ3D,IAAIiH,UAAUhI,EAAQ4H,MAAM5F,QACpDlH,KAAKmN,UAAYnN,KAAK4J,QAAQ3D,IAAIiH,UAAU,EAAGhI,EAAQ4H,MAAM5F,QAC7DlH,KAAKqF,MAAQrF,KAAK4J,QAAQvE,OAIxBmH,EJqQiB,SAAUY,GIpQ/B,QAAAZ,GAAYlJ,GAAShB,EAAAtC,KAAAwM,EAAA,IAAAa,GAAAhM,EAAArB,MAAAwM,EAAAnK,WAAAR,OAAAgG,eAAA2E,IAAAhM,KAAAR,KACbsD,GADa,OAEnBA,GAAUA,MACV+J,EAAK1K,IAAMW,EAAQX,IACnB0K,EAAKhK,IAAMC,EAAQD,IAJAgK,EJ8RlB,MAzBA7L,GAAUgL,EAAeY,GAazBrF,EAAayE,IACXpE,IAAK,UACLpG,MAAO,SI9QJ4H,GACN,OACEtE,MAAOtF,KACP2C,IAAK3C,KAAK2C,IACVU,IAAKrD,KAAKqD,IACVyJ,MAAOlD,EAAQ3D,SJmRTuG,GI/RgBzB,GAiBtBqB,EJiRiB,SAAUkB,GIhR/B,QAAAlB,GAAY9I,GAAShB,EAAAtC,KAAAoM,EAAA,IAAAmB,GAAAlM,EAAArB,MAAAoM,EAAA/J,WAAAR,OAAAgG,eAAAuE,IAAA5L,KAAAR,KACbsD,GADa,OAEnBA,GAAUA,MACViK,EAAKC,KAAOlK,EAAQkK,KACpBD,EAAKE,GAAKnK,EAAQmK,GAClBF,EAAK1B,QAAU,QAAU0B,EAAKC,KAAO,QACrCD,EAAKvB,MAAQ,GAAIC,QAAOsB,EAAK1B,SANV0B,EJ4SlB,MA3BA/L,GAAU4K,EAAekB,GAezBvF,EAAaqE,IACXhE,IAAK,UACLpG,MAAO,SIzRJ4H,EAAS5E,GACf,GAAIiB,GAAM2D,EAAQ3D,IAAI2F,QAAQ5L,KAAKgM,MAAO,KAAOhM,KAAKyN,GAAK,KAC3D,IAAIxH,IAAQ2D,EAAQ3D,IAAK,CACvB,GAAIjD,GAAS4G,EAAQuD,WAAa,EAElC,OADAnI,GAAS6E,WAAa7G,EAASiD,GACxB,OJ8RDmG,GI7SgBrB,GAqBtBuB,EJ2RgB,SAAUoB,GI1R9B,QAAApB,GAAYhJ,GAAShB,EAAAtC,KAAAsM,EAAA,IAAAqB,GAAAtM,EAAArB,MAAAsM,EAAAjK,WAAAR,OAAAgG,eAAAyE,IAAA9L,KAAAR,KACbsD,GADa,OAEnBA,GAAUA,MACVqK,EAAKhL,IAAMW,EAAQX,IACnBgL,EAAKtK,IAAMC,EAAQD,IAJAsK,EJqTlB,MA1BAnM,GAAU8K,EAAcoB,GAaxB3F,EAAauE,IACXlE,IAAK,UACLpG,MAAO,SIpSJ4H,GACN,GAAI3D,GAAM2D,EAAQ3D,IAAI2H,MACtB,IAAY,MAAR3H,GAAuB,KAARA,EACjB,OACEX,MAAOtF,KACP2C,IAAK3C,KAAK2C,IACVU,IAAKrD,KAAKqD,IACVyJ,MAAO7G,OJwSHqG,GItTevB,GAmBrB1B,EACJ,QAAAA,GAAYpD,EAAKZ,GAAO/C,EAAAtC,KAAAqJ,GACtBrJ,KAAKiG,IAAMA,EACXjG,KAAKqF,MAAQA,GAIXsF,EJsSY,WIrShB,QAAAA,GAAYf,GAAStH,EAAAtC,KAAA2K,GACnB3K,KAAKiG,IAAM2D,EAAQ3D,IACnBjG,KAAKgL,WACLhL,KAAKoF,UACLpF,KAAKqF,MAAQuE,EAAQvE,MJyUpB,MA9BA0C,GAAa4C,IACXvC,IAAK,MACLpG,MAAO,SI3SRkD,GACFlF,KAAKgL,QAAQ5E,KAAKlB,EAClB,IAAIE,GAASF,EAAQE,MACrB,IAAIA,EACF,IAAK,GAAIgD,KAAOhD,GACVA,EAAOuH,eAAevE,KACxBpI,KAAKoF,OAAOgD,GAAOhD,EAAOgD,OJiT7BA,IAAK,MACLpG,MAAO,SI5SR6L,GACF,MAAO7N,MAAKgL,QAAQ6C,MJ+SjBzF,IAAK,OACLpG,MAAO,WI5SV,MAAOhC,MAAKgL,QAAQ9D,UJgTjBkB,IAAK,UACLpG,MAAO,WI7SV,MAAOhC,MAAKgL,QAAQ9D,WJkTZyD,IIzKZzJ,GAAOY,OAASA,EAChBZ,EAAOoK,MAAQA,EACfpK,EAAOoL,aAAeA,EACtBpL,EAAOkL,cAAgBA,EACvBlL,EAAOsL,cAAgBA,EACvBtL,EAAO4M,GACLnD,SAAUA,EACVtB,QAASA,GAEXzJ,EAAOD,QAAUuB,MJ8SaV,KAAKb,EAAU,WAAa,MAAOK,WAI3D,SAAUJ,EAAQD,GK1yBxB,YAEA,IAAAoO,GAAAlM,OAAAD,UAAA+K,eACAqB,EAAAnM,OAAAD,UAAAqM,SACA9F,EAAAtG,OAAAsG,eACA+F,EAAArM,OAAA+F,yBAEAP,EAAA,SAAAf,GACA,wBAAAc,OAAAC,QACAD,MAAAC,QAAAf,GAGA,mBAAA0H,EAAAxN,KAAA8F,IAGA6H,EAAA,SAAAC,GACA,IAAAA,GAAA,oBAAAJ,EAAAxN,KAAA4N,GACA,QAGA,IAAAC,GAAAN,EAAAvN,KAAA4N,EAAA,eACAE,EAAAF,EAAArM,aAAAqM,EAAArM,YAAAH,WAAAmM,EAAAvN,KAAA4N,EAAArM,YAAAH,UAAA,gBAEA,IAAAwM,EAAArM,cAAAsM,IAAAC,EACA,QAKA,IAAAlG,EACA,KAAAA,IAAAgG,IAEA,yBAAAhG,IAAA2F,EAAAvN,KAAA4N,EAAAhG,IAIAmG,EAAA,SAAAzL,EAAAQ,GACA6E,GAAA,cAAA7E,EAAAmI,KACAtD,EAAArF,EAAAQ,EAAAmI,MACAxJ,YAAA,EACAE,cAAA,EACAH,MAAAsB,EAAAkL,SACAtM,UAAA,IAGAY,EAAAQ,EAAAmI,MAAAnI,EAAAkL,UAKAC,EAAA,SAAAL,EAAA3C,GACA,iBAAAA,EAAA,CACA,IAAAsC,EAAAvN,KAAA4N,EAAA3C,GACA,MACG,IAAAyC,EAGH,MAAAA,GAAAE,EAAA3C,GAAAzJ,MAIA,MAAAoM,GAAA3C,GAGA7L,GAAAD,QAAA,QAAAyB,KACA,GAAAkC,GAAAmI,EAAAiD,EAAAC,EAAAC,EAAAC,EACA/L,EAAAmG,UAAA,GACA1C,EAAA,EACAW,EAAA+B,UAAA/B,OACA4H,GAAA,CAaA,KAVA,iBAAAhM,KACAgM,EAAAhM,EACAA,EAAAmG,UAAA,OAEA1C,EAAA,IAEA,MAAAzD,GAAA,gBAAAA,IAAA,kBAAAA,MACAA,MAGOyD,EAAAW,IAAYX,EAGnB,GAFAjD,EAAA2F,UAAA1C,GAEA,MAAAjD,EAEA,IAAAmI,IAAAnI,GACAoL,EAAAD,EAAA3L,EAAA2I,GACAkD,EAAAF,EAAAnL,EAAAmI,GAGA3I,IAAA6L,IAEAG,GAAAH,IAAAR,EAAAQ,KAAAC,EAAAvH,EAAAsH,MACAC,GACAA,GAAA,EACAC,EAAAH,GAAArH,EAAAqH,SAEAG,EAAAH,GAAAP,EAAAO,QAIAH,EAAAzL,GAA2B2I,OAAA+C,SAAApN,EAAA0N,EAAAD,EAAAF,MAGrB,mBAAAA,IACNJ,EAAAzL,GAA2B2I,OAAA+C,SAAAG,IAQ3B,OAAA7L","file":"router.core.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"riot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"riot\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Router\"] = factory(require(\"riot\"));\n\telse\n\t\troot[\"Router\"] = factory(root[\"riot\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"riot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"riot\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Router\"] = factory(require(\"riot\"));\n\telse\n\t\troot[\"Router\"] = factory(root[\"riot\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(4)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(module, require('./src/router.js'));\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod, global.router);\n\t    global.routerCore = mod.exports;\n\t  }\n\t})(this, function (module, Router) {\n\t  'use strict';\n\t\n\t  module.exports = Router;\n\t});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }),\n/* 2 */,\n/* 3 */,\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(global) {(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(1), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(module, require('riot'), require('extend'));\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod, global.riot, global.extend);\n\t    global.router = mod.exports;\n\t  }\n\t})(this, function (module, riot, extend) {\n\t  'use strict';\n\t\n\t  var _slicedToArray = function () {\n\t    function sliceIterator(arr, i) {\n\t      var _arr = [];\n\t      var _n = true;\n\t      var _d = false;\n\t      var _e = undefined;\n\t\n\t      try {\n\t        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t          _arr.push(_s.value);\n\t\n\t          if (i && _arr.length === i) break;\n\t        }\n\t      } catch (err) {\n\t        _d = true;\n\t        _e = err;\n\t      } finally {\n\t        try {\n\t          if (!_n && _i[\"return\"]) _i[\"return\"]();\n\t        } finally {\n\t          if (_d) throw _e;\n\t        }\n\t      }\n\t\n\t      return _arr;\n\t    }\n\t\n\t    return function (arr, i) {\n\t      if (Array.isArray(arr)) {\n\t        return arr;\n\t      } else if (Symbol.iterator in Object(arr)) {\n\t        return sliceIterator(arr, i);\n\t      } else {\n\t        throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n\t      }\n\t    };\n\t  }();\n\t\n\t  function _possibleConstructorReturn(self, call) {\n\t    if (!self) {\n\t      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\t    }\n\t\n\t    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n\t  }\n\t\n\t  var _get = function get(object, property, receiver) {\n\t    if (object === null) object = Function.prototype;\n\t    var desc = Object.getOwnPropertyDescriptor(object, property);\n\t\n\t    if (desc === undefined) {\n\t      var parent = Object.getPrototypeOf(object);\n\t\n\t      if (parent === null) {\n\t        return undefined;\n\t      } else {\n\t        return get(parent, property, receiver);\n\t      }\n\t    } else if (\"value\" in desc) {\n\t      return desc.value;\n\t    } else {\n\t      var getter = desc.get;\n\t\n\t      if (getter === undefined) {\n\t        return undefined;\n\t      }\n\t\n\t      return getter.call(receiver);\n\t    }\n\t  };\n\t\n\t  function _inherits(subClass, superClass) {\n\t    if (typeof superClass !== \"function\" && superClass !== null) {\n\t      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n\t    }\n\t\n\t    subClass.prototype = Object.create(superClass && superClass.prototype, {\n\t      constructor: {\n\t        value: subClass,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    });\n\t    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n\t  }\n\t\n\t  function _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t      throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t  }\n\t\n\t  var _createClass = function () {\n\t    function defineProperties(target, props) {\n\t      for (var i = 0; i < props.length; i++) {\n\t        var descriptor = props[i];\n\t        descriptor.enumerable = descriptor.enumerable || false;\n\t        descriptor.configurable = true;\n\t        if (\"value\" in descriptor) descriptor.writable = true;\n\t        Object.defineProperty(target, descriptor.key, descriptor);\n\t      }\n\t    }\n\t\n\t    return function (Constructor, protoProps, staticProps) {\n\t      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t      if (staticProps) defineProperties(Constructor, staticProps);\n\t      return Constructor;\n\t    };\n\t  }();\n\t\n\t  var error = console && console.error || function () {};\n\t\n\t  var Router = function () {\n\t    function Router() {\n\t      _classCallCheck(this, Router);\n\t\n\t      riot.observable(this);\n\t      this.interceptors = [this.processRoute.bind(this)];\n\t      this.handler = new InitialRoute();\n\t      this.current = new Context(\"\").response;\n\t      this.process = this.process.bind(this);\n\t    }\n\t\n\t    _createClass(Router, [{\n\t      key: 'route',\n\t      value: function route(handler) {\n\t        this.handler = handler;\n\t      }\n\t    }, {\n\t      key: 'routes',\n\t      value: function routes(_routes) {\n\t        this.route(new InitialRoute().routes(_routes));\n\t      }\n\t    }, {\n\t      key: 'use',\n\t      value: function use(interceptor) {\n\t        this.interceptors.push(interceptor);\n\t      }\n\t    }, {\n\t      key: 'process',\n\t      value: function process() {\n\t        var params = Array.prototype.slice.call(arguments);\n\t        var query = {};\n\t        var uri = params.filter(function (p) {\n\t          if (typeof p !== 'string') {\n\t            query = p;\n\t            return false;\n\t          }\n\t          return true;\n\t        }).join(\"/\");\n\t        if (uri[0] !== '/') uri = \"/\" + uri; // handle '#any' as '#/any'\n\t        var context = new Context(new Request(uri, query));\n\t        if (!this.rootContext) this.rootContext = context;\n\t        this.processRequest(context);\n\t        return context;\n\t      }\n\t    }, {\n\t      key: 'processRequest',\n\t      value: function processRequest(context) {\n\t        this.processInterceptors(context);\n\t        return this.processResponse(context);\n\t      }\n\t    }, {\n\t      key: 'processResponse',\n\t      value: function processResponse(context) {\n\t        if (this.isRedirect(context)) {\n\t          return this.processRedirect(context);\n\t        }\n\t        var request = context.request,\n\t            response = context.response;\n\t\n\t        if (!response.redirectTo) {\n\t          this.current = response;\n\t          this.rootContext = null;\n\t          this.trigger('route:updated', response);\n\t          return context;\n\t        }\n\t      }\n\t    }, {\n\t      key: 'isRedirect',\n\t      value: function isRedirect(context) {\n\t        return !!context.response.redirectTo;\n\t      }\n\t    }, {\n\t      key: 'processRedirect',\n\t      value: function processRedirect(context) {\n\t        var uri = context.response.redirectTo;\n\t        this.rootContext.addRedirect(uri);\n\t        this.navigateTo(uri);\n\t      }\n\t    }, {\n\t      key: 'navigateTo',\n\t      value: function navigateTo() {\n\t        var args = Array.prototype.slice.call(arguments);\n\t        if (typeof args[1] === 'boolean') {\n\t          args.splice(1, 0, '');\n\t        }\n\t        this.config.route.apply(null, args);\n\t      }\n\t    }, {\n\t      key: 'processInterceptors',\n\t      value: function processInterceptors(context, preInterceptors, postInterceptors) {\n\t        var interceptors = (preInterceptors || []).concat(this.interceptors).concat(postInterceptors || []);\n\t        var next = function next() {\n\t          if (!context.stop) {\n\t            var processor = interceptors.shift();\n\t            var request = context.request,\n\t                response = context.response;\n\t\n\t            if (processor) return processor(request, response, next, context);\n\t          }\n\t          return context;\n\t        };\n\t        return next();\n\t      }\n\t    }, {\n\t      key: 'processRoute',\n\t      value: function processRoute(request, response, next, context) {\n\t        this.handler.process(request, response, context);\n\t        return next();\n\t      }\n\t    }, {\n\t      key: 'start',\n\t      value: function start() {\n\t        this.config.route.start();\n\t        this.exec();\n\t      }\n\t    }, {\n\t      key: 'exec',\n\t      value: function exec() {\n\t        this.config.route.exec(this.process);\n\t      }\n\t    }, {\n\t      key: 'configure',\n\t      value: function configure(options) {\n\t        this.config = extend(true, {}, this.config, options);\n\t        if (this.config.route.parser && this.config.parser) this.config.route.parser(this.config.parser);\n\t        if (this.config.route.base && this.config.base) this.config.route.base(this.config.base);\n\t        this.config.route(this.process);\n\t      }\n\t    }]);\n\t\n\t    return Router;\n\t  }();\n\t\n\t  var Context = function () {\n\t    function Context(request) {\n\t      _classCallCheck(this, Context);\n\t\n\t      this.request = typeof request === 'string' ? new Request(request) : request;\n\t      this.response = new Response(this.request);\n\t      this.redirectStack = [];\n\t    }\n\t\n\t    _createClass(Context, [{\n\t      key: 'addRedirect',\n\t      value: function addRedirect(uri) {\n\t        if (this.redirectStack.indexOf(uri) > -1) throw new Error(\"Cyclic redirection to \" + uri + \". Stack = \" + this.redirectStack);\n\t        this.redirectStack.push(uri);\n\t      }\n\t    }]);\n\t\n\t    return Context;\n\t  }();\n\t\n\t  var Handler = function () {\n\t    function Handler() {\n\t      _classCallCheck(this, Handler);\n\t    }\n\t\n\t    _createClass(Handler, [{\n\t      key: 'matches',\n\t      value: function matches(request) {\n\t        return false;\n\t      }\n\t    }, {\n\t      key: 'process',\n\t      value: function process(request, response) {\n\t        var matcher = this.matches(request);\n\t        if (!matcher) return this.routeMiss(request, response);\n\t        return this.routeMatch(request, response, matcher);\n\t      }\n\t    }, {\n\t      key: 'routeMatch',\n\t      value: function routeMatch(request, response, matcher) {\n\t        response.add(matcher);\n\t        return true;\n\t      }\n\t    }, {\n\t      key: 'routeMiss',\n\t      value: function routeMiss(request, response) {\n\t        return false;\n\t      }\n\t    }, {\n\t      key: 'processRoutes',\n\t      value: function processRoutes(request, response, routes) {\n\t        if (routes && routes.length) {\n\t          var t = routes.length;\n\t          for (var i = 0; i < t; i++) {\n\t            var route = routes[i];\n\t            if (route.process(request, response)) return true;\n\t          }\n\t          return false;\n\t        }\n\t      }\n\t    }, {\n\t      key: 'createRequest',\n\t      value: function createRequest(request, matcher) {\n\t        return new ChildRequest(request, matcher);\n\t      }\n\t    }]);\n\t\n\t    return Handler;\n\t  }();\n\t\n\t  var Route = function (_Handler) {\n\t    _inherits(Route, _Handler);\n\t\n\t    function Route(options) {\n\t      _classCallCheck(this, Route);\n\t\n\t      var _this = _possibleConstructorReturn(this, (Route.__proto__ || Object.getPrototypeOf(Route)).call(this, options));\n\t\n\t      options = options || {};\n\t      _this.tag = options.tag;\n\t      _this.api = options.api;\n\t      _this.path = options.path;\n\t      _this.name = options.name;\n\t      _this.updatable = options.updatable;\n\t      _this.pathParameterNames = [];\n\t      var path = _this.getPath().replace(/^\\//, \"\");\n\t      _this.pattern = \"^/?\" + path.replace(/:([^/]+)/g, function (ignored, group) {\n\t        this.pathParameterNames.push(group);\n\t        return \"([^/]+)\";\n\t      }.bind(_this)) + \"(:?/|$)\";\n\t      _this.regex = new RegExp(_this.pattern);\n\t      return _this;\n\t    }\n\t\n\t    _createClass(Route, [{\n\t      key: 'routes',\n\t      value: function routes(_routes2) {\n\t        var redirectRoutes = _routes2.filter(function (r) {\n\t          return r instanceof RedirectRoute;\n\t        });\n\t        var defaultRoutes = _routes2.filter(function (r) {\n\t          return r instanceof DefaultRoute;\n\t        });\n\t        var notFoundRoutes = _routes2.filter(function (r) {\n\t          return r instanceof NotFoundRoute;\n\t        });\n\t        var otherRoutes = _routes2.filter(function (r) {\n\t          return redirectRoutes.indexOf(r) === -1 && defaultRoutes.indexOf(r) === -1 && notFoundRoutes.indexOf(r) === -1;\n\t        });\n\t        if (notFoundRoutes.length > 1) error(\"Can't use more than one NotFoundRoute per route. --> \" + this.getPath());\n\t        if (defaultRoutes.length > 1) error(\"Can't use more than one DefaultRoute per route. --> \" + this.getPath());\n\t        this._routes = [].concat(redirectRoutes).concat(otherRoutes).concat(defaultRoutes).concat(notFoundRoutes);\n\t        return this;\n\t      }\n\t    }, {\n\t      key: 'matches',\n\t      value: function matches(request) {\n\t        var matcher = this.regex.exec(request.uri);\n\t        if (matcher) {\n\t          var params = {};\n\t          for (var i in this.pathParameterNames) {\n\t            if (this.pathParameterNames.hasOwnProperty(i)) {\n\t              var name = this.pathParameterNames[i];\n\t              params[name] = decodeURIComponent(matcher[parseInt(i, 10) + 1]);\n\t            }\n\t          }\n\t          return {\n\t            route: this,\n\t            tag: this.tag,\n\t            api: this.api,\n\t            found: matcher[0],\n\t            params: params\n\t          };\n\t        }\n\t        return false;\n\t      }\n\t    }, {\n\t      key: 'routeMatch',\n\t      value: function routeMatch(request, response, matcher) {\n\t        var matches = _get(Route.prototype.__proto__ || Object.getPrototypeOf(Route.prototype), 'routeMatch', this).call(this, request, response, matcher);\n\t        this.processRoutes(request, response, matcher);\n\t        return matches;\n\t      }\n\t    }, {\n\t      key: 'processRoutes',\n\t      value: function processRoutes(request, response, matcher) {\n\t        return _get(Route.prototype.__proto__ || Object.getPrototypeOf(Route.prototype), 'processRoutes', this).call(this, this.createRequest(request, matcher), response, this._routes);\n\t      }\n\t    }, {\n\t      key: 'getPath',\n\t      value: function getPath() {\n\t        return this.name || this.path || (typeof this.tag === 'string' ? this.tag : '');\n\t      }\n\t    }]);\n\t\n\t    return Route;\n\t  }(Handler);\n\t\n\t  var InitialRoute = function (_Route) {\n\t    _inherits(InitialRoute, _Route);\n\t\n\t    function InitialRoute() {\n\t      _classCallCheck(this, InitialRoute);\n\t\n\t      return _possibleConstructorReturn(this, (InitialRoute.__proto__ || Object.getPrototypeOf(InitialRoute)).apply(this, arguments));\n\t    }\n\t\n\t    return InitialRoute;\n\t  }(Route);\n\t\n\t  var ChildRequest = function ChildRequest(request, matcher) {\n\t    _classCallCheck(this, ChildRequest);\n\t\n\t    this.request = request;\n\t    this.matcher = matcher;\n\t    this.uri = this.request.uri.substring(matcher.found.length);\n\t    this.parentUri = this.request.uri.substring(0, matcher.found.length);\n\t    this.query = this.request.query;\n\t  };\n\t\n\t  var NotFoundRoute = function (_Handler2) {\n\t    _inherits(NotFoundRoute, _Handler2);\n\t\n\t    function NotFoundRoute(options) {\n\t      _classCallCheck(this, NotFoundRoute);\n\t\n\t      var _this3 = _possibleConstructorReturn(this, (NotFoundRoute.__proto__ || Object.getPrototypeOf(NotFoundRoute)).call(this, options));\n\t\n\t      options = options || {};\n\t      _this3.tag = options.tag;\n\t      _this3.api = options.api;\n\t      return _this3;\n\t    }\n\t\n\t    _createClass(NotFoundRoute, [{\n\t      key: 'matches',\n\t      value: function matches(request) {\n\t        return {\n\t          route: this,\n\t          tag: this.tag,\n\t          api: this.api,\n\t          found: request.uri\n\t        };\n\t      }\n\t    }]);\n\t\n\t    return NotFoundRoute;\n\t  }(Handler);\n\t\n\t  var RedirectRoute = function (_Handler3) {\n\t    _inherits(RedirectRoute, _Handler3);\n\t\n\t    function RedirectRoute(options) {\n\t      _classCallCheck(this, RedirectRoute);\n\t\n\t      var _this4 = _possibleConstructorReturn(this, (RedirectRoute.__proto__ || Object.getPrototypeOf(RedirectRoute)).call(this, options));\n\t\n\t      options = options || {};\n\t      _this4.from = options.from;\n\t      _this4.to = options.to;\n\t      _this4.pattern = \"(^/?)\" + _this4.from + \"(/|$)\";\n\t      _this4.regex = new RegExp(_this4.pattern);\n\t      return _this4;\n\t    }\n\t\n\t    _createClass(RedirectRoute, [{\n\t      key: 'process',\n\t      value: function process(request, response) {\n\t        var uri = request.uri.replace(this.regex, \"$1\" + this.to + \"$2\");\n\t        if (uri !== request.uri) {\n\t          var parent = request.parentUri || \"\";\n\t          response.redirectTo = parent + uri;\n\t          return true;\n\t        }\n\t      }\n\t    }]);\n\t\n\t    return RedirectRoute;\n\t  }(Handler);\n\t\n\t  var DefaultRoute = function (_Handler4) {\n\t    _inherits(DefaultRoute, _Handler4);\n\t\n\t    function DefaultRoute(options) {\n\t      _classCallCheck(this, DefaultRoute);\n\t\n\t      var _this5 = _possibleConstructorReturn(this, (DefaultRoute.__proto__ || Object.getPrototypeOf(DefaultRoute)).call(this, options));\n\t\n\t      options = options || {};\n\t      _this5.tag = options.tag;\n\t      _this5.api = options.api;\n\t      return _this5;\n\t    }\n\t\n\t    _createClass(DefaultRoute, [{\n\t      key: 'matches',\n\t      value: function matches(request) {\n\t        var uri = request.uri.trim();\n\t        if (uri === \"/\" || uri === \"\") return {\n\t          route: this,\n\t          tag: this.tag,\n\t          api: this.api,\n\t          found: uri\n\t        };\n\t      }\n\t    }]);\n\t\n\t    return DefaultRoute;\n\t  }(Handler);\n\t\n\t  var Request = function Request(uri, query) {\n\t    _classCallCheck(this, Request);\n\t\n\t    this.uri = uri;\n\t    this.query = query;\n\t  };\n\t\n\t  var Response = function () {\n\t    function Response(request) {\n\t      _classCallCheck(this, Response);\n\t\n\t      this.uri = request.uri;\n\t      this.matches = [];\n\t      this.params = {};\n\t      this.query = request.query;\n\t    }\n\t\n\t    _createClass(Response, [{\n\t      key: 'add',\n\t      value: function add(matcher) {\n\t        this.matches.push(matcher);\n\t        var params = matcher.params;\n\t        if (params) {\n\t          for (var key in params) {\n\t            if (params.hasOwnProperty(key)) {\n\t              this.params[key] = params[key];\n\t            }\n\t          }\n\t        }\n\t      }\n\t    }, {\n\t      key: 'get',\n\t      value: function get(index) {\n\t        return this.matches[index];\n\t      }\n\t    }, {\n\t      key: 'size',\n\t      value: function size() {\n\t        return this.matches.length;\n\t      }\n\t    }, {\n\t      key: 'isEmpty',\n\t      value: function isEmpty() {\n\t        return this.matches.length;\n\t      }\n\t    }]);\n\t\n\t    return Response;\n\t  }();\n\t\n\t  function registerTag(router) {\n\t    riot.tag('route', '<router-content></router-content>', '', '', function (opts) {\n\t      this.calculateLevel = function (target) {\n\t        var level = 0;\n\t        if (target.parent) level += this.calculateLevel(target.parent);\n\t        if (target.opts.__router_level) level += target.opts.__router_level;\n\t        if (target.__router_tag) level += 1;\n\t        return level;\n\t      }.bind(this);\n\t\n\t      this.normalizeTag = function (tag, api, options) {\n\t        var result = tag(api, options);\n\t        if (typeof result === 'string') {\n\t          tag = result;\n\t        } else {\n\t          tag = result.tag || tag;\n\t          api = result.api || api;\n\t        }\n\t        return [tag, api, options];\n\t      };\n\t\n\t      this.unmountTag = function () {\n\t        if (this.instance) this.instance.unmount(true);\n\t      };\n\t\n\t      this.mountTag = function (tag, api, options) {\n\t        if (typeof tag === 'function') {\n\t          var _normalizeTag = this.normalizeTag(tag, api, options);\n\t\n\t          var _normalizeTag2 = _slicedToArray(_normalizeTag, 3);\n\t\n\t          tag = _normalizeTag2[0];\n\t          api = _normalizeTag2[1];\n\t          options = _normalizeTag2[2];\n\t        }\n\t        console.log('tag, api, options', tag, api, options);\n\t        if (this.canUpdate(tag, api, options)) {\n\t          console.log('UPDATE UPDATE!!!');\n\t          this.instance.update({ opts: api });\n\t        } else {\n\t          this.unmountTag();\n\t          if (tag) {\n\t            this.root.replaceChild(document.createElement(tag), this.root.children[0]);\n\t            try {\n\t              this.instance = riot.mount(this.root.children[0], tag, api)[0];\n\t            } catch (e) {\n\t              error(\"Error when mounting tag '\" + tag + \"'.\", e);\n\t              return;\n\t            }\n\t            this.instanceTag = tag;\n\t            this.instanceApi = api;\n\t          }\n\t        }\n\t      };\n\t\n\t      this.canUpdate = function (tag, api, options) {\n\t        if (options.updatable === false) return false;\n\t        if (!router.config.updatable && !opts.updatable && !options.updatable || !this.instance || !this.instance.isMounted || this.instanceTag !== tag) return false;\n\t        return true;\n\t      };\n\t\n\t      this.updateRoute = function () {\n\t        var mount = {\n\t          tag: null\n\t        };\n\t        if (router && router.current) {\n\t          var response = router.current;\n\t          if (this.level <= response.size()) {\n\t            var matcher = response.get(this.level);\n\t            if (matcher) {\n\t              var params = matcher.params || {};\n\t              var query = response.query || {};\n\t              var api = extend(true, {}, opts, query, matcher.api, params, {\n\t                __router_level: this.level,\n\t                query: query\n\t              });\n\t              mount = {\n\t                tag: matcher.tag,\n\t                api: api,\n\t                updatable: matcher.route.updatable\n\t              };\n\t            }\n\t          }\n\t        }\n\t        if (mount.tag) this.mountTag(mount.tag, mount.api, mount);else this.unmountTag();\n\t      }.bind(this);\n\t\n\t      this.__router_tag = 'route';\n\t      this.level = this.calculateLevel(this);\n\t      router.on('route:updated', this.updateRoute);\n\t      this.on('unmount', function () {\n\t        router.off('route:updated', this.updateRoute);\n\t        this.unmountTag();\n\t      }.bind(this));\n\t      this.on('mount', this.updateRoute);\n\t    });\n\t  }\n\t\n\t  function detectRoute() {\n\t    var route = riot.route || window && window.route || global && global.route;\n\t    return route;\n\t  }\n\t\n\t  function create(config) {\n\t    var router = new Router();\n\t    router.configure(extend(true, {\n\t      updatable: true,\n\t      route: detectRoute(),\n\t      base: '#',\n\t      parser: function customRiotParser(path) {\n\t        var raw = path.split('?'),\n\t            uri = raw[0].split('/'),\n\t            query = raw[1],\n\t            params = {};\n\t        if (query) {\n\t          query.split('&').forEach(function (v) {\n\t            var c = v.split('=');\n\t            params[c[0]] = c[1];\n\t          });\n\t        }\n\t        uri.push(params);\n\t        return uri;\n\t      }\n\t    }, config));\n\t    registerTag(router);\n\t    if (!Router.instance) Router.instance = router;\n\t    return router;\n\t  }\n\t  Router.create = create;\n\t  Router.Route = Route;\n\t  Router.DefaultRoute = DefaultRoute;\n\t  Router.RedirectRoute = RedirectRoute;\n\t  Router.NotFoundRoute = NotFoundRoute;\n\t  Router._ = {\n\t    Response: Response,\n\t    Request: Request\n\t  };\n\t  module.exports = Router;\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar hasOwn = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar defineProperty = Object.defineProperty;\n\tvar gOPD = Object.getOwnPropertyDescriptor;\n\t\n\tvar isArray = function isArray(arr) {\n\t\tif (typeof Array.isArray === 'function') {\n\t\t\treturn Array.isArray(arr);\n\t\t}\n\t\n\t\treturn toStr.call(arr) === '[object Array]';\n\t};\n\t\n\tvar isPlainObject = function isPlainObject(obj) {\n\t\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\t\treturn false;\n\t\t}\n\t\n\t\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\t\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t\t// Not own constructor property must be Object\n\t\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\t\treturn false;\n\t\t}\n\t\n\t\t// Own properties are enumerated firstly, so to speed up,\n\t\t// if last one is own, then all properties are own.\n\t\tvar key;\n\t\tfor (key in obj) { /**/ }\n\t\n\t\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n\t};\n\t\n\t// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\n\tvar setProperty = function setProperty(target, options) {\n\t\tif (defineProperty && options.name === '__proto__') {\n\t\t\tdefineProperty(target, options.name, {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: options.newValue,\n\t\t\t\twritable: true\n\t\t\t});\n\t\t} else {\n\t\t\ttarget[options.name] = options.newValue;\n\t\t}\n\t};\n\t\n\t// Return undefined instead of __proto__ if '__proto__' is not an own property\n\tvar getProperty = function getProperty(obj, name) {\n\t\tif (name === '__proto__') {\n\t\t\tif (!hasOwn.call(obj, name)) {\n\t\t\t\treturn void 0;\n\t\t\t} else if (gOPD) {\n\t\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\t\treturn gOPD(obj, name).value;\n\t\t\t}\n\t\t}\n\t\n\t\treturn obj[name];\n\t};\n\t\n\tmodule.exports = function extend() {\n\t\tvar options, name, src, copy, copyIsArray, clone;\n\t\tvar target = arguments[0];\n\t\tvar i = 1;\n\t\tvar length = arguments.length;\n\t\tvar deep = false;\n\t\n\t\t// Handle a deep copy situation\n\t\tif (typeof target === 'boolean') {\n\t\t\tdeep = target;\n\t\t\ttarget = arguments[1] || {};\n\t\t\t// skip the boolean and the target\n\t\t\ti = 2;\n\t\t}\n\t\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\t\ttarget = {};\n\t\t}\n\t\n\t\tfor (; i < length; ++i) {\n\t\t\toptions = arguments[i];\n\t\t\t// Only deal with non-null/undefined values\n\t\t\tif (options != null) {\n\t\t\t\t// Extend the base object\n\t\t\t\tfor (name in options) {\n\t\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\t\tcopy = getProperty(options, name);\n\t\n\t\t\t\t\t// Prevent never-ending loop\n\t\t\t\t\tif (target !== copy) {\n\t\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\t\n\t\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t// Return the modified object\n\t\treturn target;\n\t};\n\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// router.core.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f054c2e15f99f2f3999d","var Router = require('./src/router.js');\nmodule.exports = Router;\n\n\n// WEBPACK FOOTER //\n// ./router.core.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"riot\"\n// module id = 1\n// module chunks = 0 1","var riot = require('riot');\nvar extend = require('extend');\nvar error = console && console.error || function () {};\n\nclass Router {\n  constructor() {\n    riot.observable(this);\n    this.interceptors = [this.processRoute.bind(this)];\n    this.handler = new InitialRoute();\n    this.current = new Context(\"\").response;\n    this.process = this.process.bind(this);\n  }\n\n  route(handler) {\n    this.handler = handler;\n  }\n\n  routes(routes) {\n    this.route(new InitialRoute().routes(routes));\n  }\n\n  use(interceptor) {\n    this.interceptors.push(interceptor);\n  }\n\n  process() {\n    var params = Array.prototype.slice.call(arguments);\n    var query = {};\n    var uri = params.filter(function (p) {\n      if (typeof (p) !== 'string') {\n        query = p;\n        return false;\n      }\n      return true;\n    }).join(\"/\");\n    if (uri[0] !== '/') uri = \"/\" + uri; // handle '#any' as '#/any'\n    var context = new Context(new Request(uri, query));\n    if (!this.rootContext) this.rootContext = context;\n    this.processRequest(context);\n    return context;\n  }\n\n  processRequest(context) {\n    this.processInterceptors(context);\n    return this.processResponse(context);\n  }\n\n  processResponse(context) {\n    if (this.isRedirect(context)) {\n      return this.processRedirect(context);\n    }\n    var {\n      request,\n      response\n    } = context;\n    if (!response.redirectTo) {\n      this.current = response;\n      this.rootContext = null;\n      this.trigger('route:updated', response);\n      return context;\n    }\n  }\n\n  isRedirect(context) {\n    return !!context.response.redirectTo;\n  }\n\n  processRedirect(context) {\n    var uri = context.response.redirectTo;\n    this.rootContext.addRedirect(uri);\n    this.navigateTo(uri);\n  }\n\n  navigateTo() {\n    var args = Array.prototype.slice.call(arguments);\n    if (typeof(args[1]) === 'boolean') {\n      args.splice(1, 0, '');\n    }\n    this.config.route.apply(null, args);\n  }\n\n  processInterceptors(context, preInterceptors, postInterceptors) {\n    var interceptors = (preInterceptors || []).concat(this.interceptors).concat(postInterceptors || []);\n    var next = function next() {\n      if (!context.stop) {\n        var processor = interceptors.shift();\n        var {\n          request,\n          response\n        } = context;\n        if (processor)\n          return processor(request, response, next, context);\n      }\n      return context;\n    };\n    return next();\n  }\n\n  processRoute(request, response, next, context) {\n    this.handler.process(request, response, context);\n    return next();\n  }\n\n  start() {\n    this.config.route.start();\n    this.exec();\n  }\n\n  exec() {\n    this.config.route.exec(this.process);\n  }\n\n  configure(options) {\n    this.config = extend(true, {}, this.config, options);\n    if (this.config.route.parser && this.config.parser)\n      this.config.route.parser(this.config.parser);\n    if (this.config.route.base && this.config.base)\n      this.config.route.base(this.config.base);\n    this.config.route(this.process);\n  }\n\n}\n\nclass Context {\n  constructor(request) {\n    this.request = typeof (request) === 'string' ? new Request(request) : request;\n    this.response = new Response(this.request);\n    this.redirectStack = [];\n  }\n\n  addRedirect(uri) {\n    if (this.redirectStack.indexOf(uri) > -1)\n      throw new Error(\"Cyclic redirection to \" + uri + \". Stack = \" + this.redirectStack);\n    this.redirectStack.push(uri);\n  }\n\n}\n\nclass Handler {\n  constructor() {}\n\n  matches(request) {\n    return false;\n  }\n\n  process(request, response) {\n    var matcher = this.matches(request);\n    if (!matcher) return this.routeMiss(request, response);\n    return this.routeMatch(request, response, matcher);\n  }\n\n  routeMatch(request, response, matcher) {\n    response.add(matcher);\n    return true;\n  }\n\n  routeMiss(request, response) {\n    return false;\n  }\n\n  processRoutes(request, response, routes) {\n    if (routes && routes.length) {\n      var t = routes.length;\n      for (var i = 0; i < t; i++) {\n        var route = routes[i];\n        if (route.process(request, response))\n          return true;\n      }\n      return false;\n    }\n  }\n\n  createRequest(request, matcher) {\n    return new ChildRequest(request, matcher);\n  }\n}\n\nclass Route extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.tag = options.tag;\n    this.api = options.api;\n    this.path = options.path;\n    this.name = options.name;\n    this.updatable = options.updatable;\n    this.pathParameterNames = [];\n    var path = this.getPath().replace(/^\\//, \"\");\n    this.pattern = \"^/?\" + path.replace(/:([^/]+)/g, function (ignored, group) {\n      this.pathParameterNames.push(group);\n      return \"([^/]+)\";\n    }.bind(this)) + \"(:?/|$)\";\n    this.regex = new RegExp(this.pattern);\n  }\n\n  routes(routes) {\n    var redirectRoutes = routes.filter(function (r) {\n      return r instanceof RedirectRoute;\n    });\n    var defaultRoutes = routes.filter(function (r) {\n      return r instanceof DefaultRoute;\n    });\n    var notFoundRoutes = routes.filter(function (r) {\n      return r instanceof NotFoundRoute;\n    });\n    var otherRoutes = routes.filter(function (r) {\n      return redirectRoutes.indexOf(r) === -1 &&\n        defaultRoutes.indexOf(r) === -1 &&\n        notFoundRoutes.indexOf(r) === -1;\n    });\n    if (notFoundRoutes.length > 1) error(\"Can't use more than one NotFoundRoute per route. --> \" + this.getPath());\n    if (defaultRoutes.length > 1) error(\"Can't use more than one DefaultRoute per route. --> \" + this.getPath());\n    this._routes = [].concat(redirectRoutes).concat(otherRoutes).concat(defaultRoutes).concat(notFoundRoutes);\n    return this;\n  }\n\n  matches(request) {\n    var matcher = this.regex.exec(request.uri);\n    if (matcher) {\n      var params = {};\n      for (var i in this.pathParameterNames) {\n        if (this.pathParameterNames.hasOwnProperty(i)) {\n          var name = this.pathParameterNames[i];\n          params[name] = decodeURIComponent(matcher[parseInt(i, 10) + 1]);\n        }\n      }\n      return {\n        route: this,\n        tag: this.tag,\n        api: this.api,\n        found: matcher[0],\n        params: params\n      };\n    }\n    return false;\n  }\n\n  routeMatch(request, response, matcher) {\n    var matches = super.routeMatch(request, response, matcher);\n    this.processRoutes(request, response, matcher);\n    return matches;\n  }\n\n  processRoutes(request, response, matcher) {\n    return super.processRoutes(this.createRequest(request, matcher), response, this._routes);\n  }\n\n  getPath() {\n    return this.name || this.path || (typeof this.tag === 'string' ? this.tag : '');\n  }\n}\n\nclass InitialRoute extends Route {\n\n}\n\nclass ChildRequest {\n  constructor(request, matcher) {\n    this.request = request;\n    this.matcher = matcher;\n    this.uri = this.request.uri.substring(matcher.found.length);\n    this.parentUri = this.request.uri.substring(0, matcher.found.length);\n    this.query = this.request.query;\n  }\n}\n\nclass NotFoundRoute extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.tag = options.tag;\n    this.api = options.api;\n  }\n  matches(request) {\n    return {\n      route: this,\n      tag: this.tag,\n      api: this.api,\n      found: request.uri\n    };\n  }\n}\n\nclass RedirectRoute extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.from = options.from;\n    this.to = options.to;\n    this.pattern = \"(^/?)\" + this.from + \"(/|$)\";\n    this.regex = new RegExp(this.pattern);\n  }\n\n  process(request, response) {\n    var uri = request.uri.replace(this.regex, \"$1\" + this.to + \"$2\");\n    if (uri !== request.uri) {\n      var parent = request.parentUri || \"\";\n      response.redirectTo = parent + uri;\n      return true;\n    }\n  }\n\n}\n\nclass DefaultRoute extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.tag = options.tag;\n    this.api = options.api;\n  }\n  matches(request) {\n    var uri = request.uri.trim();\n    if (uri === \"/\" || uri === \"\")\n      return {\n        route: this,\n        tag: this.tag,\n        api: this.api,\n        found: uri\n      };\n  }\n}\n\nclass Request {\n  constructor(uri, query) {\n    this.uri = uri;\n    this.query = query;\n  }\n}\n\nclass Response {\n  constructor(request) {\n    this.uri = request.uri;\n    this.matches = [];\n    this.params = {};\n    this.query = request.query;\n  }\n  add(matcher) {\n    this.matches.push(matcher);\n    var params = matcher.params;\n    if (params) {\n      for (var key in params) {\n        if (params.hasOwnProperty(key)) {\n          this.params[key] = params[key];\n        }\n      }\n    }\n  }\n\n  get(index) {\n    return this.matches[index];\n  }\n\n  size() {\n    return this.matches.length;\n  }\n\n  isEmpty() {\n    return this.matches.length;\n  }\n\n}\n\nfunction registerTag(router) {\n  riot.tag('route', '<router-content></router-content>', '', '', function (opts) {\n    this.calculateLevel = function (target) {\n      var level = 0;\n      if (target.parent) level += this.calculateLevel(target.parent);\n      if (target.opts.__router_level) level += target.opts.__router_level;\n      if (target.__router_tag) level += 1;\n      return level;\n    }.bind(this);\n\n    this.normalizeTag = function (tag, api, options) {\n      var result = tag(api, options);\n      if (typeof result === 'string') {\n        tag = result;\n      } else {\n        tag = result.tag || tag;\n        api = result.api || api;\n      }\n      return [tag, api, options];\n    }\n\n    this.unmountTag = function () {\n      if (this.instance)\n        this.instance.unmount(true);\n    }\n\n    this.mountTag = function (tag, api, options) {\n      if (typeof tag === 'function') {\n        [tag, api, options] = this.normalizeTag(tag, api, options);\n      }\n      console.log('tag, api, options', tag, api, options);\n      if (this.canUpdate(tag, api, options)) {\n        console.log('UPDATE UPDATE!!!');\n        this.instance.update({ opts: api });\n      } else {\n        this.unmountTag();\n        if (tag) {\n          this.root.replaceChild(document.createElement(tag), this.root.children[0]);\n          try {\n            this.instance = riot.mount(this.root.children[0], tag, api)[0];\n          } catch (e) {\n            error(\"Error when mounting tag '\" + tag + \"'.\", e);\n            return;\n          }\n          this.instanceTag = tag;\n          this.instanceApi = api;\n        }\n      }\n    }\n\n    this.canUpdate = function (tag, api, options) {\n      if (options.updatable === false) return false;\n      if ((!router.config.updatable && !opts.updatable && !options.updatable) ||\n        !this.instance ||\n        !this.instance.isMounted ||\n        this.instanceTag !== tag)\n        return false;\n      return true;\n    }\n\n    this.updateRoute = function () {\n      var mount = {\n        tag: null\n      };\n      if (router && router.current) {\n        var response = router.current;\n        if (this.level <= response.size()) {\n          var matcher = response.get(this.level);\n          if (matcher) {\n            var params = matcher.params || {};\n            var query = response.query || {};\n            var api = extend(true, {}, opts, query, matcher.api, params, {\n              __router_level: this.level,\n              query: query\n            });\n            mount = {\n              tag: matcher.tag,\n              api: api,\n              updatable: matcher.route.updatable\n            };\n          }\n        }\n      }\n      if (mount.tag)\n        this.mountTag(mount.tag, mount.api, mount);\n      else\n        this.unmountTag();\n    }.bind(this);\n\n    this.__router_tag = 'route';\n    this.level = this.calculateLevel(this);\n    router.on('route:updated', this.updateRoute);\n    this.on('unmount', function () {\n      router.off('route:updated', this.updateRoute);\n      this.unmountTag();\n    }.bind(this));\n    this.on('mount', this.updateRoute);\n  });\n}\n\nfunction detectRoute() {\n  var route = riot.route ||\n    (window && window.route) ||\n    (global && global.route);\n  return route;\n}\n\nfunction create(config) {\n  var router = new Router();\n  router.configure(extend(true, {\n    updatable: true,\n    route: detectRoute(),\n    base: '#',\n    parser: function customRiotParser(path) {\n      var raw = path.split('?'),\n        uri = raw[0].split('/'),\n        query = raw[1],\n        params = {}\n      if (query) {\n        query.split('&').forEach(function (v) {\n          var c = v.split('=')\n          params[c[0]] = c[1]\n        })\n      }\n      uri.push(params)\n      return uri\n    }\n  }, config));\n  registerTag(router);\n  if (!Router.instance) Router.instance = router;\n  return router;\n}\nRouter.create = create;\nRouter.Route = Route;\nRouter.DefaultRoute = DefaultRoute;\nRouter.RedirectRoute = RedirectRoute;\nRouter.NotFoundRoute = NotFoundRoute;\nRouter._ = {\n  Response: Response,\n  Request: Request\n};\nmodule.exports = Router;\n\n\n\n// WEBPACK FOOTER //\n// ./src/router.js","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extend/index.js\n// module id = 5\n// module chunks = 0 1"],"sourceRoot":""}