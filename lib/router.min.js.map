{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///router.min.js","webpack:///webpack/bootstrap cea7bff7f7fa62d22ef5","webpack:///./router.js","webpack:///external \"riot\"","webpack:///./~/extend/index.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","global","apply","undefined","riot","extend","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","customRiotParser","path","raw","split","uri","query","params","forEach","v","push","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","length","err","Array","isArray","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_createClass","defineProperties","target","props","descriptor","defineProperty","key","protoProps","staticProps","error","console","Router","router","observable","interceptors","processRoute","bind","handler","InitialRoute","current","Context","response","process","routes","route","interceptor","slice","arguments","filter","join","context","Request","rootContext","processRequest","processInterceptors","processResponse","isRedirect","processRedirect","request","redirectTo","trigger","addRedirect","navigateTo","preInterceptors","postInterceptors","concat","stop","processor","shift","parser","start","exec","Response","redirectStack","indexOf","Error","Handler","matcher","matches","routeMatch","routeMiss","add","t","ChildRequest","Route","_Handler","options","_this","tag","api","name","updatable","pathParameterNames","getPath","replace","pattern","ignored","group","regex","RegExp","redirectRoutes","r","RedirectRoute","defaultRoutes","DefaultRoute","notFoundRoutes","NotFoundRoute","otherRoutes","_routes","hasOwnProperty","decodeURIComponent","parseInt","found","processRoutes","createRequest","_Route","substring","parentUri","_Handler2","_this3","_Handler3","_this4","from","to","_Handler4","_this5","trim","index","opts","calculateLevel","level","__router_level","__router_tag","normalizeTag","result","unmountTag","unmount","mountTag","_normalizeTag","_normalizeTag2","canUpdate","update","replaceChild","document","createElement","children","mount","instanceTag","instanceApi","config","isMounted","updateRoute","size","on","off","_","hasOwn","toStr","toString","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","src","copy","copyIsArray","clone","deep"],"mappings":"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","file":"router.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"riot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"riot\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Router\"] = factory(require(\"riot\"));\n\telse\n\t\troot[\"Router\"] = factory(root[\"riot\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"riot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"riot\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Router\"] = factory(require(\"riot\"));\n\telse\n\t\troot[\"Router\"] = factory(root[\"riot\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(1), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(module, require('riot'), require('extend'));\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod, global.riot, global.extend);\n\t    global.router = mod.exports;\n\t  }\n\t})(this, function (module, riot, extend) {\n\t  'use strict';\n\t\n\t  var _slicedToArray = function () {\n\t    function sliceIterator(arr, i) {\n\t      var _arr = [];\n\t      var _n = true;\n\t      var _d = false;\n\t      var _e = undefined;\n\t\n\t      try {\n\t        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t          _arr.push(_s.value);\n\t\n\t          if (i && _arr.length === i) break;\n\t        }\n\t      } catch (err) {\n\t        _d = true;\n\t        _e = err;\n\t      } finally {\n\t        try {\n\t          if (!_n && _i[\"return\"]) _i[\"return\"]();\n\t        } finally {\n\t          if (_d) throw _e;\n\t        }\n\t      }\n\t\n\t      return _arr;\n\t    }\n\t\n\t    return function (arr, i) {\n\t      if (Array.isArray(arr)) {\n\t        return arr;\n\t      } else if (Symbol.iterator in Object(arr)) {\n\t        return sliceIterator(arr, i);\n\t      } else {\n\t        throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n\t      }\n\t    };\n\t  }();\n\t\n\t  function _possibleConstructorReturn(self, call) {\n\t    if (!self) {\n\t      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\t    }\n\t\n\t    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n\t  }\n\t\n\t  var _get = function get(object, property, receiver) {\n\t    if (object === null) object = Function.prototype;\n\t    var desc = Object.getOwnPropertyDescriptor(object, property);\n\t\n\t    if (desc === undefined) {\n\t      var parent = Object.getPrototypeOf(object);\n\t\n\t      if (parent === null) {\n\t        return undefined;\n\t      } else {\n\t        return get(parent, property, receiver);\n\t      }\n\t    } else if (\"value\" in desc) {\n\t      return desc.value;\n\t    } else {\n\t      var getter = desc.get;\n\t\n\t      if (getter === undefined) {\n\t        return undefined;\n\t      }\n\t\n\t      return getter.call(receiver);\n\t    }\n\t  };\n\t\n\t  function _inherits(subClass, superClass) {\n\t    if (typeof superClass !== \"function\" && superClass !== null) {\n\t      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n\t    }\n\t\n\t    subClass.prototype = Object.create(superClass && superClass.prototype, {\n\t      constructor: {\n\t        value: subClass,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    });\n\t    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n\t  }\n\t\n\t  function _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t      throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t  }\n\t\n\t  var _createClass = function () {\n\t    function defineProperties(target, props) {\n\t      for (var i = 0; i < props.length; i++) {\n\t        var descriptor = props[i];\n\t        descriptor.enumerable = descriptor.enumerable || false;\n\t        descriptor.configurable = true;\n\t        if (\"value\" in descriptor) descriptor.writable = true;\n\t        Object.defineProperty(target, descriptor.key, descriptor);\n\t      }\n\t    }\n\t\n\t    return function (Constructor, protoProps, staticProps) {\n\t      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t      if (staticProps) defineProperties(Constructor, staticProps);\n\t      return Constructor;\n\t    };\n\t  }();\n\t\n\t  var error = console && console.error || function () {};\n\t\n\t  function customRiotParser(path) {\n\t    var raw = path.split('?'),\n\t        uri = raw[0].split('/'),\n\t        query = raw[1],\n\t        params = {};\n\t    if (query) {\n\t      query.split('&').forEach(function (v) {\n\t        var c = v.split('=');\n\t        params[c[0]] = c[1];\n\t      });\n\t    }\n\t    uri.push(params);\n\t    return uri;\n\t  }\n\t\n\t  var Router = function () {\n\t    function Router() {\n\t      _classCallCheck(this, Router);\n\t\n\t      riot.router = this;\n\t      riot.observable(this);\n\t      this.interceptors = [this.processRoute.bind(this)];\n\t      this.handler = new InitialRoute();\n\t      this.current = new Context(\"\").response;\n\t      this.process = this.process.bind(this);\n\t    }\n\t\n\t    _createClass(Router, [{\n\t      key: 'route',\n\t      value: function route(handler) {\n\t        this.handler = handler;\n\t      }\n\t    }, {\n\t      key: 'routes',\n\t      value: function routes(_routes) {\n\t        this.route(new InitialRoute().routes(_routes));\n\t      }\n\t    }, {\n\t      key: 'use',\n\t      value: function use(interceptor) {\n\t        this.interceptors.push(interceptor);\n\t      }\n\t    }, {\n\t      key: 'process',\n\t      value: function process() {\n\t        var params = Array.prototype.slice.call(arguments);\n\t        var query = {};\n\t        var uri = params.filter(function (p) {\n\t          if (typeof p !== 'string') {\n\t            query = p;\n\t            return false;\n\t          }\n\t          return true;\n\t        }).join(\"/\");\n\t        if (uri[0] !== '/') uri = \"/\" + uri; // handle '#any' as '#/any'\n\t        var context = new Context(new Request(uri, query));\n\t        if (!this.rootContext) this.rootContext = context;\n\t        this.processRequest(context);\n\t        return context;\n\t      }\n\t    }, {\n\t      key: 'processRequest',\n\t      value: function processRequest(context) {\n\t        this.processInterceptors(context);\n\t        return this.processResponse(context);\n\t      }\n\t    }, {\n\t      key: 'processResponse',\n\t      value: function processResponse(context) {\n\t        if (this.isRedirect(context)) {\n\t          return this.processRedirect(context);\n\t        }\n\t        var request = context.request;\n\t        var response = context.response;\n\t\n\t        if (!response.redirectTo) {\n\t          this.current = response;\n\t          this.rootContext = null;\n\t          this.trigger('route:updated', response);\n\t          return context;\n\t        }\n\t      }\n\t    }, {\n\t      key: 'isRedirect',\n\t      value: function isRedirect(context) {\n\t        return !!context.response.redirectTo;\n\t      }\n\t    }, {\n\t      key: 'processRedirect',\n\t      value: function processRedirect(context) {\n\t        var uri = context.response.redirectTo;\n\t        this.rootContext.addRedirect(uri);\n\t        this.navigateTo(uri);\n\t      }\n\t    }, {\n\t      key: 'navigateTo',\n\t      value: function navigateTo(uri) {\n\t        riot.route(uri);\n\t      }\n\t    }, {\n\t      key: 'processInterceptors',\n\t      value: function processInterceptors(context, preInterceptors, postInterceptors) {\n\t        var interceptors = (preInterceptors || []).concat(this.interceptors).concat(postInterceptors || []);\n\t        var next = function next() {\n\t          if (!context.stop) {\n\t            var processor = interceptors.shift();\n\t            var request = context.request;\n\t            var response = context.response;\n\t\n\t            if (processor) return processor(request, response, next, context);\n\t          }\n\t          return context;\n\t        };\n\t        return next();\n\t      }\n\t    }, {\n\t      key: 'processRoute',\n\t      value: function processRoute(request, response, next, context) {\n\t        this.handler.process(request, response, context);\n\t        return next();\n\t      }\n\t    }, {\n\t      key: 'start',\n\t      value: function start() {\n\t        riot.route.parser(customRiotParser);\n\t        riot.route(this.process);\n\t        riot.route.start();\n\t        this.exec();\n\t      }\n\t    }, {\n\t      key: 'exec',\n\t      value: function exec() {\n\t        riot.route.exec(this.process);\n\t      }\n\t    }]);\n\t\n\t    return Router;\n\t  }();\n\t\n\t  var Context = function () {\n\t    function Context(request) {\n\t      _classCallCheck(this, Context);\n\t\n\t      this.request = typeof request === 'string' ? new Request(request) : request;\n\t      this.response = new Response(this.request);\n\t      this.redirectStack = [];\n\t    }\n\t\n\t    _createClass(Context, [{\n\t      key: 'addRedirect',\n\t      value: function addRedirect(uri) {\n\t        if (this.redirectStack.indexOf(uri) > -1) throw new Error(\"Cyclic redirection to \" + uri + \". Stack = \" + this.redirectStack);\n\t        this.redirectStack.push(uri);\n\t      }\n\t    }]);\n\t\n\t    return Context;\n\t  }();\n\t\n\t  var Handler = function () {\n\t    function Handler() {\n\t      _classCallCheck(this, Handler);\n\t    }\n\t\n\t    _createClass(Handler, [{\n\t      key: 'matches',\n\t      value: function matches(request) {\n\t        return false;\n\t      }\n\t    }, {\n\t      key: 'process',\n\t      value: function process(request, response) {\n\t        var matcher = this.matches(request);\n\t        if (!matcher) return this.routeMiss(request, response);\n\t        return this.routeMatch(request, response, matcher);\n\t      }\n\t    }, {\n\t      key: 'routeMatch',\n\t      value: function routeMatch(request, response, matcher) {\n\t        response.add(matcher);\n\t        return true;\n\t      }\n\t    }, {\n\t      key: 'routeMiss',\n\t      value: function routeMiss(request, response) {\n\t        return false;\n\t      }\n\t    }, {\n\t      key: 'processRoutes',\n\t      value: function processRoutes(request, response, routes) {\n\t        if (routes && routes.length) {\n\t          var t = routes.length;\n\t          for (var i = 0; i < t; i++) {\n\t            var route = routes[i];\n\t            if (route.process(request, response)) return true;\n\t          }\n\t          return false;\n\t        }\n\t      }\n\t    }, {\n\t      key: 'createRequest',\n\t      value: function createRequest(request, matcher) {\n\t        return new ChildRequest(request, matcher);\n\t      }\n\t    }]);\n\t\n\t    return Handler;\n\t  }();\n\t\n\t  var Route = function (_Handler) {\n\t    _inherits(Route, _Handler);\n\t\n\t    function Route(options) {\n\t      _classCallCheck(this, Route);\n\t\n\t      var _this = _possibleConstructorReturn(this, (Route.__proto__ || Object.getPrototypeOf(Route)).call(this, options));\n\t\n\t      options = options || {};\n\t      _this.tag = options.tag;\n\t      _this.api = options.api;\n\t      _this.path = options.path;\n\t      _this.name = options.name;\n\t      _this.updatable = options.updatable;\n\t      _this.pathParameterNames = [];\n\t      var path = _this.getPath().replace(/^\\//, \"\");\n\t      _this.pattern = \"^/?\" + path.replace(/:([^/]+)/g, function (ignored, group) {\n\t        this.pathParameterNames.push(group);\n\t        return \"([^/]+)\";\n\t      }.bind(_this)) + \"(:?/|$)\";\n\t      _this.regex = new RegExp(_this.pattern);\n\t      return _this;\n\t    }\n\t\n\t    _createClass(Route, [{\n\t      key: 'routes',\n\t      value: function routes(_routes2) {\n\t        var redirectRoutes = _routes2.filter(function (r) {\n\t          return r instanceof RedirectRoute;\n\t        });\n\t        var defaultRoutes = _routes2.filter(function (r) {\n\t          return r instanceof DefaultRoute;\n\t        });\n\t        var notFoundRoutes = _routes2.filter(function (r) {\n\t          return r instanceof NotFoundRoute;\n\t        });\n\t        var otherRoutes = _routes2.filter(function (r) {\n\t          return redirectRoutes.indexOf(r) === -1 && defaultRoutes.indexOf(r) === -1 && notFoundRoutes.indexOf(r) === -1;\n\t        });\n\t        if (notFoundRoutes.length > 1) error(\"Can't use more than one NotFoundRoute per route. --> \" + this.getPath());\n\t        if (defaultRoutes.length > 1) error(\"Can't use more than one DefaultRoute per route. --> \" + this.getPath());\n\t        this._routes = [].concat(redirectRoutes).concat(otherRoutes).concat(defaultRoutes).concat(notFoundRoutes);\n\t        return this;\n\t      }\n\t    }, {\n\t      key: 'matches',\n\t      value: function matches(request) {\n\t        var matcher = this.regex.exec(request.uri);\n\t        if (matcher) {\n\t          var params = {};\n\t          for (var i in this.pathParameterNames) {\n\t            if (this.pathParameterNames.hasOwnProperty(i)) {\n\t              var name = this.pathParameterNames[i];\n\t              params[name] = decodeURIComponent(matcher[parseInt(i, 10) + 1]);\n\t            }\n\t          }\n\t          return { route: this, tag: this.tag, api: this.api, found: matcher[0], params: params };\n\t        }\n\t        return false;\n\t      }\n\t    }, {\n\t      key: 'routeMatch',\n\t      value: function routeMatch(request, response, matcher) {\n\t        var matches = _get(Route.prototype.__proto__ || Object.getPrototypeOf(Route.prototype), 'routeMatch', this).call(this, request, response, matcher);\n\t        this.processRoutes(request, response, matcher);\n\t        return matches;\n\t      }\n\t    }, {\n\t      key: 'processRoutes',\n\t      value: function processRoutes(request, response, matcher) {\n\t        return _get(Route.prototype.__proto__ || Object.getPrototypeOf(Route.prototype), 'processRoutes', this).call(this, this.createRequest(request, matcher), response, this._routes);\n\t      }\n\t    }, {\n\t      key: 'getPath',\n\t      value: function getPath() {\n\t        return this.name || this.path || (typeof this.tag === 'string' ? this.tag : '');\n\t      }\n\t    }]);\n\t\n\t    return Route;\n\t  }(Handler);\n\t\n\t  var InitialRoute = function (_Route) {\n\t    _inherits(InitialRoute, _Route);\n\t\n\t    function InitialRoute() {\n\t      _classCallCheck(this, InitialRoute);\n\t\n\t      return _possibleConstructorReturn(this, (InitialRoute.__proto__ || Object.getPrototypeOf(InitialRoute)).apply(this, arguments));\n\t    }\n\t\n\t    return InitialRoute;\n\t  }(Route);\n\t\n\t  var ChildRequest = function ChildRequest(request, matcher) {\n\t    _classCallCheck(this, ChildRequest);\n\t\n\t    this.request = request;\n\t    this.matcher = matcher;\n\t    this.uri = this.request.uri.substring(matcher.found.length);\n\t    this.parentUri = this.request.uri.substring(0, matcher.found.length);\n\t    this.query = this.request.query;\n\t  };\n\t\n\t  var NotFoundRoute = function (_Handler2) {\n\t    _inherits(NotFoundRoute, _Handler2);\n\t\n\t    function NotFoundRoute(options) {\n\t      _classCallCheck(this, NotFoundRoute);\n\t\n\t      var _this3 = _possibleConstructorReturn(this, (NotFoundRoute.__proto__ || Object.getPrototypeOf(NotFoundRoute)).call(this, options));\n\t\n\t      options = options || {};\n\t      _this3.tag = options.tag;\n\t      _this3.api = options.api;\n\t      return _this3;\n\t    }\n\t\n\t    _createClass(NotFoundRoute, [{\n\t      key: 'matches',\n\t      value: function matches(request) {\n\t        return { route: this, tag: this.tag, api: this.api, found: request.uri };\n\t      }\n\t    }]);\n\t\n\t    return NotFoundRoute;\n\t  }(Handler);\n\t\n\t  var RedirectRoute = function (_Handler3) {\n\t    _inherits(RedirectRoute, _Handler3);\n\t\n\t    function RedirectRoute(options) {\n\t      _classCallCheck(this, RedirectRoute);\n\t\n\t      var _this4 = _possibleConstructorReturn(this, (RedirectRoute.__proto__ || Object.getPrototypeOf(RedirectRoute)).call(this, options));\n\t\n\t      options = options || {};\n\t      _this4.from = options.from;\n\t      _this4.to = options.to;\n\t      _this4.pattern = \"(^/?)\" + _this4.from + \"(/|$)\";\n\t      _this4.regex = new RegExp(_this4.pattern);\n\t      return _this4;\n\t    }\n\t\n\t    _createClass(RedirectRoute, [{\n\t      key: 'process',\n\t      value: function process(request, response) {\n\t        var uri = request.uri.replace(this.regex, \"$1\" + this.to + \"$2\");\n\t        if (uri !== request.uri) {\n\t          var parent = request.parentUri || \"\";\n\t          response.redirectTo = parent + uri;\n\t          return true;\n\t        }\n\t      }\n\t    }]);\n\t\n\t    return RedirectRoute;\n\t  }(Handler);\n\t\n\t  var DefaultRoute = function (_Handler4) {\n\t    _inherits(DefaultRoute, _Handler4);\n\t\n\t    function DefaultRoute(options) {\n\t      _classCallCheck(this, DefaultRoute);\n\t\n\t      var _this5 = _possibleConstructorReturn(this, (DefaultRoute.__proto__ || Object.getPrototypeOf(DefaultRoute)).call(this, options));\n\t\n\t      options = options || {};\n\t      _this5.tag = options.tag;\n\t      _this5.api = options.api;\n\t      return _this5;\n\t    }\n\t\n\t    _createClass(DefaultRoute, [{\n\t      key: 'matches',\n\t      value: function matches(request) {\n\t        var uri = request.uri.trim();\n\t        if (uri === \"/\" || uri === \"\") return { route: this, tag: this.tag, api: this.api, found: uri };\n\t      }\n\t    }]);\n\t\n\t    return DefaultRoute;\n\t  }(Handler);\n\t\n\t  var Request = function Request(uri, query) {\n\t    _classCallCheck(this, Request);\n\t\n\t    this.uri = uri;\n\t    this.query = query;\n\t  };\n\t\n\t  var Response = function () {\n\t    function Response(request) {\n\t      _classCallCheck(this, Response);\n\t\n\t      this.uri = request.uri;\n\t      this.matches = [];\n\t      this.params = {};\n\t      this.query = request.query;\n\t    }\n\t\n\t    _createClass(Response, [{\n\t      key: 'add',\n\t      value: function add(matcher) {\n\t        this.matches.push(matcher);\n\t        var params = matcher.params;\n\t        if (params) {\n\t          for (var key in params) {\n\t            if (params.hasOwnProperty(key)) {\n\t              this.params[key] = params[key];\n\t            }\n\t          }\n\t        }\n\t      }\n\t    }, {\n\t      key: 'get',\n\t      value: function get(index) {\n\t        return this.matches[index];\n\t      }\n\t    }, {\n\t      key: 'size',\n\t      value: function size() {\n\t        return this.matches.length;\n\t      }\n\t    }, {\n\t      key: 'isEmpty',\n\t      value: function isEmpty() {\n\t        return this.matches.length;\n\t      }\n\t    }]);\n\t\n\t    return Response;\n\t  }();\n\t\n\t  riot.tag('route', '<router-content></router-content>', function (opts) {\n\t    this.calculateLevel = function (target) {\n\t      var level = 0;\n\t      if (target.parent) level += this.calculateLevel(target.parent);\n\t      if (target.opts.__router_level) level += target.opts.__router_level;\n\t      if (target.__router_tag) level += 1;\n\t      return level;\n\t    }.bind(this);\n\t\n\t    this.normalizeTag = function (tag, api, options) {\n\t      var result = tag(api, options);\n\t      if (typeof result === 'string') {\n\t        tag = result;\n\t      } else {\n\t        tag = result.tag || tag;\n\t        api = result.api || api;\n\t      }\n\t      return [tag, api, options];\n\t    };\n\t\n\t    this.unmountTag = function () {\n\t      if (this.instance) this.instance.unmount(true);\n\t    };\n\t\n\t    this.mountTag = function (tag, api, options) {\n\t      if (typeof tag === 'function') {\n\t        var _normalizeTag = this.normalizeTag(tag, api, options);\n\t\n\t        var _normalizeTag2 = _slicedToArray(_normalizeTag, 3);\n\t\n\t        tag = _normalizeTag2[0];\n\t        api = _normalizeTag2[1];\n\t        options = _normalizeTag2[2];\n\t      }\n\t      if (this.canUpdate(tag, api, options)) {\n\t        this.instance.update(api);\n\t      } else {\n\t        this.unmountTag();\n\t        if (tag) {\n\t          this.root.replaceChild(document.createElement(tag), this.root.children[0]);\n\t          this.instance = riot.mount(this.root.children[0], tag, api)[0];\n\t          this.instanceTag = tag;\n\t          this.instanceApi = api;\n\t        }\n\t      }\n\t    };\n\t\n\t    this.canUpdate = function (tag, api, options) {\n\t      if (!riot.router.config.updatable && !opts.updatable && !options.updatable || !this.instance || !this.instance.isMounted || this.instanceTag !== tag) return false;\n\t      return true;\n\t    };\n\t\n\t    this.updateRoute = function () {\n\t      var mount = { tag: null };\n\t      if (riot.router && riot.router.current) {\n\t        var response = riot.router.current;\n\t        if (this.level <= response.size()) {\n\t          var matcher = response.get(this.level);\n\t          if (matcher) {\n\t            var params = matcher.params || {};\n\t            var query = response.query || {};\n\t            var api = extend(true, {}, opts, query, matcher.api, params, { __router_level: this.level, query: query });\n\t            mount = { tag: matcher.tag, api: api, updatable: matcher.route.updatable };\n\t          }\n\t        }\n\t      }\n\t      if (mount.tag) this.mountTag(mount.tag, mount.api, mount);else this.unmountTag();\n\t    }.bind(this);\n\t\n\t    this.__router_tag = 'route';\n\t    this.level = this.calculateLevel(this);\n\t    riot.router.on('route:updated', this.updateRoute);\n\t    this.on('unmount', function () {\n\t      riot.router.off('route:updated', this.updateRoute);\n\t      this.unmountTag();\n\t    }.bind(this));\n\t    this.on('mount', function () {\n\t      this.updateRoute();\n\t    }.bind(this));\n\t  });\n\t\n\t  var router = new Router();\n\t  router.Route = Route;\n\t  router.DefaultRoute = DefaultRoute;\n\t  router.RedirectRoute = RedirectRoute;\n\t  router.NotFoundRoute = NotFoundRoute;\n\t  router._ = { Response: Response, Request: Request };\n\t\n\t  router.config = {\n\t    updatable: false\n\t  };\n\t\n\t  riot.router = router;\n\t\n\t  module.exports = router;\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar hasOwn = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\t\n\tvar isArray = function isArray(arr) {\n\t\tif (typeof Array.isArray === 'function') {\n\t\t\treturn Array.isArray(arr);\n\t\t}\n\t\n\t\treturn toStr.call(arr) === '[object Array]';\n\t};\n\t\n\tvar isPlainObject = function isPlainObject(obj) {\n\t\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\t\treturn false;\n\t\t}\n\t\n\t\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\t\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t\t// Not own constructor property must be Object\n\t\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\t\treturn false;\n\t\t}\n\t\n\t\t// Own properties are enumerated firstly, so to speed up,\n\t\t// if last one is own, then all properties are own.\n\t\tvar key;\n\t\tfor (key in obj) {/**/}\n\t\n\t\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n\t};\n\t\n\tmodule.exports = function extend() {\n\t\tvar options, name, src, copy, copyIsArray, clone,\n\t\t\ttarget = arguments[0],\n\t\t\ti = 1,\n\t\t\tlength = arguments.length,\n\t\t\tdeep = false;\n\t\n\t\t// Handle a deep copy situation\n\t\tif (typeof target === 'boolean') {\n\t\t\tdeep = target;\n\t\t\ttarget = arguments[1] || {};\n\t\t\t// skip the boolean and the target\n\t\t\ti = 2;\n\t\t} else if ((typeof target !== 'object' && typeof target !== 'function') || target == null) {\n\t\t\ttarget = {};\n\t\t}\n\t\n\t\tfor (; i < length; ++i) {\n\t\t\toptions = arguments[i];\n\t\t\t// Only deal with non-null/undefined values\n\t\t\tif (options != null) {\n\t\t\t\t// Extend the base object\n\t\t\t\tfor (name in options) {\n\t\t\t\t\tsrc = target[name];\n\t\t\t\t\tcopy = options[name];\n\t\n\t\t\t\t\t// Prevent never-ending loop\n\t\t\t\t\tif (target !== copy) {\n\t\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\t\n\t\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t// Return the modified object\n\t\treturn target;\n\t};\n\t\n\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** router.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cea7bff7f7fa62d22ef5\n **/","var riot = require('riot');\nvar extend = require('extend');\nvar error = console && console.error || function() {};\n\nfunction customRiotParser(path) {\n  var raw = path.split('?'),\n      uri = raw[0].split('/'),\n      query = raw[1],\n      params = {}\n  if (query) {\n    query.split('&').forEach(function(v) {\n      var c = v.split('=')\n      params[c[0]] = c[1]\n    })\n  }\n  uri.push(params)\n  return uri\n}\n\nclass Router {\n\n  constructor() {\n    riot.router = this;\n    riot.observable(this);\n    this.interceptors = [this.processRoute.bind(this)];\n    this.handler = new InitialRoute();\n    this.current = new Context(\"\").response;\n    this.process = this.process.bind(this);\n  }\n\n  route(handler) {\n    this.handler = handler;\n  }\n\n  routes(routes) {\n    this.route(new InitialRoute().routes(routes));\n  }\n\n  use(interceptor) {\n    this.interceptors.push(interceptor);\n  }\n\n  process() {\n    var params = Array.prototype.slice.call(arguments);\n    var query = {};\n    var uri = params.filter(function(p) {\n      if (typeof(p) !== 'string') {\n        query = p;\n        return false;\n      }\n      return true;\n    }).join(\"/\");\n    if (uri[0] !== '/') uri = \"/\" + uri; // handle '#any' as '#/any'\n    var context = new Context(new Request(uri, query));\n    if (!this.rootContext) this.rootContext = context;\n    this.processRequest(context);\n    return context;\n  }\n\n  processRequest(context) {\n    this.processInterceptors(context);\n    return this.processResponse(context);\n  }\n\n  processResponse(context) {\n    if (this.isRedirect(context)) {\n      return this.processRedirect(context);\n    }\n    var {request, response} = context;\n    if (!response.redirectTo) {\n      this.current = response;\n      this.rootContext = null;\n      this.trigger('route:updated', response);\n      return context;\n    }\n  }\n\n  isRedirect(context) {\n    return !!context.response.redirectTo;\n  }\n\n  processRedirect(context) {\n    var uri = context.response.redirectTo;\n    this.rootContext.addRedirect(uri);\n    this.navigateTo(uri);\n  }\n\n  navigateTo(uri) {\n    riot.route(uri);\n  }\n\n  processInterceptors(context, preInterceptors, postInterceptors) {\n    var interceptors = (preInterceptors || []).concat(this.interceptors).concat(postInterceptors || []);\n    var next = function next() {\n      if (!context.stop) {\n        var processor = interceptors.shift();\n        var {request, response} = context;\n        if (processor)\n          return processor(request, response, next, context);\n      }\n      return context;\n    };\n    return next();\n  }\n\n  processRoute(request, response, next, context) {\n    this.handler.process(request, response, context);\n    return next();\n  }\n\n  start() {\n    riot.route.parser(customRiotParser);\n    riot.route(this.process);\n    riot.route.start();\n    this.exec();\n  }\n\n  exec() {\n    riot.route.exec(this.process);\n  }\n\n}\n\nclass Context {\n  constructor(request) {\n    this.request = typeof(request) === 'string' ? new Request(request) : request;\n    this.response = new Response(this.request);\n    this.redirectStack = [];\n  }\n\n  addRedirect(uri) {\n    if (this.redirectStack.indexOf(uri) > -1)\n      throw new Error(\"Cyclic redirection to \" + uri + \". Stack = \" + this.redirectStack);\n    this.redirectStack.push(uri);\n  }\n\n}\n\nclass Handler {\n  constructor() {\n  }\n\n  matches(request) {\n    return false;\n  }\n\n  process(request, response) {\n    var matcher = this.matches(request);\n    if (!matcher) return this.routeMiss(request, response);\n    return this.routeMatch(request, response, matcher);\n  }\n\n  routeMatch(request, response, matcher) {\n    response.add(matcher);\n    return true;\n  }\n\n  routeMiss(request, response) {\n    return false;\n  }\n\n  processRoutes(request, response, routes) {\n    if (routes && routes.length) {\n      var t = routes.length;\n      for(var i = 0; i < t; i++) {\n        var route = routes[i];\n        if (route.process(request, response))\n          return true;\n      }\n      return false;\n    }\n  }\n\n  createRequest(request, matcher) {\n    return new ChildRequest(request, matcher);\n  }\n}\n\nclass Route extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.tag = options.tag;\n    this.api = options.api;\n    this.path = options.path;\n    this.name = options.name;\n    this.updatable = options.updatable;\n    this.pathParameterNames = [];\n    var path = this.getPath().replace(/^\\//,\"\");\n    this.pattern = \"^/?\" + path.replace(/:([^/]+)/g, function(ignored, group) {\n      this.pathParameterNames.push(group);\n      return \"([^/]+)\";\n    }.bind(this)) + \"(:?/|$)\";\n    this.regex = new RegExp(this.pattern);\n  }\n\n  routes(routes) {\n    var redirectRoutes = routes.filter(function(r) { return r instanceof RedirectRoute; });\n    var defaultRoutes = routes.filter(function(r) { return r instanceof DefaultRoute; });\n    var notFoundRoutes = routes.filter(function(r) { return r instanceof NotFoundRoute; });\n    var otherRoutes = routes.filter(function(r) { return redirectRoutes.indexOf(r) === -1\n                                                      &&  defaultRoutes.indexOf(r) === -1\n                                                      && notFoundRoutes.indexOf(r) === -1; });\n    if (notFoundRoutes.length > 1) error(\"Can't use more than one NotFoundRoute per route. --> \" + this.getPath());\n    if (defaultRoutes.length > 1) error(\"Can't use more than one DefaultRoute per route. --> \" + this.getPath());\n    this._routes = [].concat(redirectRoutes).concat(otherRoutes).concat(defaultRoutes).concat(notFoundRoutes);\n    return this;\n  }\n\n  matches(request) {\n    var matcher = this.regex.exec(request.uri);\n    if (matcher) {\n      var params = {};\n      for (var i in this.pathParameterNames) {\n        if (this.pathParameterNames.hasOwnProperty(i)) {\n          var name = this.pathParameterNames[i];\n          params[name] = decodeURIComponent(matcher[parseInt(i, 10) + 1]);\n        }\n      }\n      return {route: this, tag: this.tag, api: this.api, found: matcher[0], params: params};\n    }\n    return false;\n  }\n\n  routeMatch(request, response, matcher) {\n    var matches = super.routeMatch(request, response, matcher);\n    this.processRoutes(request, response, matcher);\n    return matches;\n  }\n\n  processRoutes(request, response, matcher) {\n    return super.processRoutes(this.createRequest(request, matcher), response, this._routes);\n  }\n\n  getPath() {\n    return this.name || this.path || (typeof this.tag === 'string' ? this.tag : '');\n  }\n}\n\nclass InitialRoute extends Route {\n\n}\n\nclass ChildRequest {\n  constructor(request, matcher) {\n    this.request = request;\n    this.matcher = matcher;\n    this.uri = this.request.uri.substring(matcher.found.length);\n    this.parentUri = this.request.uri.substring(0, matcher.found.length);\n    this.query = this.request.query;\n  }\n}\n\nclass NotFoundRoute extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.tag = options.tag;\n    this.api = options.api;\n  }\n  matches(request) {\n    return {route: this, tag: this.tag, api: this.api, found: request.uri};\n  }\n}\n\nclass RedirectRoute extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.from = options.from;\n    this.to = options.to;\n    this.pattern = \"(^/?)\" + this.from + \"(/|$)\";\n    this.regex = new RegExp(this.pattern);\n  }\n\n  process(request, response) {\n    var uri = request.uri.replace(this.regex, \"$1\" + this.to + \"$2\");\n    if (uri !== request.uri) {\n      var parent = request.parentUri || \"\";\n      response.redirectTo = parent + uri;\n      return true;\n    }\n  }\n\n}\n\nclass DefaultRoute extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.tag = options.tag;\n    this.api = options.api;\n  }\n  matches(request) {\n    var uri = request.uri.trim();\n    if (uri === \"/\" || uri === \"\")\n      return {route: this, tag: this.tag, api: this.api, found: uri};\n  }\n}\n\nclass Request {\n  constructor(uri, query) {\n    this.uri = uri;\n    this.query = query;\n  }\n}\n\nclass Response {\n  constructor(request) {\n    this.uri = request.uri;\n    this.matches = [];\n    this.params = {};\n    this.query = request.query;\n  }\n  add(matcher) {\n    this.matches.push(matcher);\n    var params = matcher.params;\n    if (params) {\n      for (var key in params) {\n        if (params.hasOwnProperty(key)) {\n          this.params[key] = params[key];\n        }\n      }\n    }\n  }\n\n  get(index) {\n    return this.matches[index];\n  }\n\n  size() {\n    return this.matches.length;\n  }\n\n  isEmpty() {\n    return this.matches.length;\n  }\n\n}\n\nriot.tag('route', '<router-content></router-content>', function(opts) {\n  this.calculateLevel = function(target) {\n    var level = 0;\n    if (target.parent) level += this.calculateLevel(target.parent);\n    if (target.opts.__router_level) level += target.opts.__router_level;\n    if (target.__router_tag) level += 1;\n    return level;\n  }.bind(this);\n\n  this.normalizeTag = function(tag, api, options) {\n    var result = tag(api, options);\n    if (typeof result === 'string') {\n      tag = result;\n    } else  {\n      tag = result.tag || tag;\n      api = result.api || api;\n    }\n    return [tag, api, options];\n  }\n\n  this.unmountTag = function() {\n    if (this.instance)\n        this.instance.unmount(true);\n  }\n\n  this.mountTag = function(tag, api, options) {\n    if (typeof tag === 'function') {\n      [tag, api, options] = this.normalizeTag(tag, api, options);\n    }\n    if (this.canUpdate(tag, api, options)) {\n      this.instance.update(api);\n    } else {\n      this.unmountTag();\n      if (tag) {\n        this.root.replaceChild(document.createElement(tag), this.root.children[0]);\n        this.instance = riot.mount(this.root.children[0], tag, api)[0];\n        this.instanceTag = tag;\n        this.instanceApi = api;\n      }\n    }\n  }\n\n  this.canUpdate = function(tag, api, options) {\n    if ((!riot.router.config.updatable && !opts.updatable && !options.updatable)\n      || !this.instance\n      || !this.instance.isMounted\n      || this.instanceTag !== tag)\n      return false;\n    return true;\n  }\n\n  this.updateRoute = function() {\n    var mount = {tag: null};\n    if (riot.router && riot.router.current) {\n      var response = riot.router.current;\n      if (this.level <= response.size()) {\n        var matcher = response.get(this.level);\n        if (matcher) {\n          var params = matcher.params || {};\n          var query = response.query || {};\n          var api = extend(true, {}, opts, query, matcher.api, params, {__router_level: this.level, query: query});\n          mount = {tag: matcher.tag, api: api, updatable: matcher.route.updatable};\n        }\n      }\n    }\n    if (mount.tag)\n      this.mountTag(mount.tag, mount.api, mount);\n    else\n      this.unmountTag();\n  }.bind(this);\n\n  this.__router_tag = 'route';\n  this.level = this.calculateLevel(this);\n  riot.router.on('route:updated', this.updateRoute);\n  this.on('unmount', function() {\n    riot.router.off('route:updated', this.updateRoute);\n    this.unmountTag();\n  }.bind(this));\n  this.on('mount', function() {\n    this.updateRoute();\n  }.bind(this));\n});\n\nvar router = new Router();\nrouter.Route = Route;\nrouter.DefaultRoute = DefaultRoute;\nrouter.RedirectRoute = RedirectRoute;\nrouter.NotFoundRoute = NotFoundRoute;\nrouter._ = {Response: Response, Request: Request};\n\nrouter.config = {\n  updatable: false\n}\n\nriot.router = router;\n\nmodule.exports = router;\n\n\n\n/** WEBPACK FOOTER **\n ** ./router.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"riot\"\n ** module id = 1\n ** module chunks = 0\n **/","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {/**/}\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if ((typeof target !== 'object' && typeof target !== 'function') || target == null) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/extend/index.js\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":""}